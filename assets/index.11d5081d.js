var Jt=Object.defineProperty,Qt=Object.defineProperties;var Kt=Object.getOwnPropertyDescriptors;var Je=Object.getOwnPropertySymbols;var en=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable;var Qe=(e,t,n)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))en.call(t,n)&&Qe(e,n,t[n]);if(Je)for(var n of Je(t))tn.call(t,n)&&Qe(e,n,t[n]);return e},K=(e,t)=>Qt(e,Kt(t));var Ke=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var V=(e,t,n)=>(Ke(e,t,"read from private field"),n?n.call(e):t.get(e)),ye=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_e=(e,t,n,r)=>(Ke(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{V as F}from"./vendor.b1428349.js";import{f as nn,J as rn,b as on,a as sn,E as an}from"./devterm.9e5b33a4.js";import{b as et}from"./buffer.4460b8ba.js";const ln=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};ln();const cn="modulepreload",tt={},un="/",O=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${un}${r}`,r in tt)return;tt[r]=!0;const o=r.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":cn,o||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),o)return new Promise((a,l)=>{s.addEventListener("load",a),s.addEventListener("error",l)})})).then(()=>t())};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Re=function(e,t){return Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Re(e,t)};function ue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Re(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function fn(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(p){try{c(r.next(p))}catch(w){s(w)}}function l(p){try{c(r.throw(p))}catch(w){s(w)}}function c(p){p.done?i(p.value):o(p.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function nt(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(p){return l([c,p])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(p){c=[6,p],o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ee(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function te(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function ne(e){return this instanceof ne?(this.v=e,this):new ne(e)}function pn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){r[f]&&(o[f]=function(y){return new Promise(function(u,d){i.push([f,y,u,d])>1||a(f,y)})})}function a(f,y){try{l(r[f](y))}catch(u){w(i[0][3],u)}}function l(f){f.value instanceof ne?Promise.resolve(f.value.v).then(c,p):w(i[0][2],f)}function c(f){a("next",f)}function p(f){a("throw",f)}function w(f,y){f(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function dn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ee=="function"?ee(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,l){s=e[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}function C(e){return typeof e=="function"}function rt(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var De=rt(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,o){return o+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Fe(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var we=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}return e.prototype.unsubscribe=function(){var t,n,r,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=ee(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var p=this.initialTeardown;if(C(p))try{p()}catch(d){i=d instanceof De?d.errors:[d]}var w=this._teardowns;if(w){this._teardowns=null;try{for(var f=ee(w),y=f.next();!y.done;y=f.next()){var u=y.value;try{st(u)}catch(d){i=i!=null?i:[],d instanceof De?i=te(te([],Z(i)),Z(d.errors)):i.push(d)}}}catch(d){r={error:d}}finally{try{y&&!y.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}}if(i)throw new De(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)st(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=(n=this._teardowns)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Fe(n,t)},e.prototype.remove=function(t){var n=this._teardowns;n&&Fe(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),ot=we.EMPTY;function it(e){return e instanceof we||e&&"closed"in e&&C(e.remove)&&C(e.add)&&C(e.unsubscribe)}function st(e){C(e)?e():e.unsubscribe()}var be={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xe={setTimeout:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=xe.delegate;return((n==null?void 0:n.setTimeout)||setTimeout).apply(void 0,te([],Z(e)))},clearTimeout:function(e){var t=xe.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function at(e){xe.setTimeout(function(){throw e})}function Se(){}var hn=function(){return Ne("C",void 0,void 0)}();function vn(e){return Ne("E",void 0,e)}function mn(e){return Ne("N",e,void 0)}function Ne(e,t,n){return{kind:e,value:t,error:n}}var Ee=null;function Te(e){if(be.useDeprecatedSynchronousErrorHandling){var t=!Ee;if(t&&(Ee={errorThrown:!1,error:null}),e(),t){var n=Ee,r=n.errorThrown,o=n.error;if(Ee=null,r)throw o}}else e()}var je=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,it(n)&&n.add(r)):r.destination=gn,r}return t.create=function(n,r,o){return new Ie(n,r,o)},t.prototype.next=function(n){this.isStopped?Ge(mn(n),this):this._next(n)},t.prototype.error=function(n){this.isStopped?Ge(vn(n),this):(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped?Ge(hn,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(we),Ie=function(e){ue(t,e);function t(n,r,o){var i=e.call(this)||this,s;if(C(n))s=n;else if(n){s=n.next,r=n.error,o=n.complete;var a;i&&be.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return i.unsubscribe()}):a=n,s=s==null?void 0:s.bind(a),r=r==null?void 0:r.bind(a),o=o==null?void 0:o.bind(a)}return i.destination={next:s?Me(s):Se,error:Me(r!=null?r:lt),complete:o?Me(o):Se},i}return t}(je);function Me(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{e.apply(void 0,te([],Z(n)))}catch(o){at(o)}}}function lt(e){throw e}function Ge(e,t){var n=be.onStoppedNotification;n&&xe.setTimeout(function(){return n(e,t)})}var gn={closed:!0,next:Se,error:lt,complete:Se},He=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function yn(e){return e}function _n(e){return e.length===0?yn:e.length===1?e[0]:function(n){return e.reduce(function(r,o){return o(r)},n)}}var A=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var o=this,i=bn(t)?t:new Ie(t,n,r);return Te(function(){var s=o,a=s.operator,l=s.source;i.add(a?a.call(i,l):l?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=ct(n),new n(function(o,i){var s=new Ie({next:function(a){try{t(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[He]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return _n(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=ct(t),new t(function(r,o){var i;n.subscribe(function(s){return i=s},function(s){return o(s)},function(){return r(i)})})},e.create=function(t){return new e(t)},e}();function ct(e){var t;return(t=e!=null?e:be.Promise)!==null&&t!==void 0?t:Promise}function wn(e){return e&&C(e.next)&&C(e.error)&&C(e.complete)}function bn(e){return e&&e instanceof je||wn(e)&&it(e)}function xn(e){return C(e==null?void 0:e.lift)}function re(e){return function(t){if(xn(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var fe=function(e){ue(t,e);function t(n,r,o,i,s){var a=e.call(this,n)||this;return a.onFinalize=s,a._next=r?function(l){try{r(l)}catch(c){n.error(c)}}:e.prototype._next,a._error=i?function(l){try{i(l)}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=o?function(){try{o()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,a}return t.prototype.unsubscribe=function(){var n,r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))},t}(je),Sn=rt(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ut=function(e){ue(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new ft(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Sn},t.prototype.next=function(n){var r=this;Te(function(){var o,i;if(r._throwIfClosed(),!r.isStopped){var s=r.observers.slice();try{for(var a=ee(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.next(n)}}catch(p){o={error:p}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},t.prototype.error=function(n){var r=this;Te(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var o=r.observers;o.length;)o.shift().error(n)}})},t.prototype.complete=function(){var n=this;Te(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,o=r.hasError,i=r.isStopped,s=r.observers;return o||i?ot:(s.push(n),new we(function(){return Fe(s,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,o=r.hasError,i=r.thrownError,s=r.isStopped;o?n.error(i):s&&n.complete()},t.prototype.asObservable=function(){var n=new A;return n.source=this,n},t.create=function(n,r){return new ft(n,r)},t}(A),ft=function(e){ue(t,e);function t(n,r){var o=e.call(this)||this;return o.destination=n,o.source=r,o}return t.prototype.next=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.next)===null||o===void 0||o.call(r,n)},t.prototype.error=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.error)===null||o===void 0||o.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,o;return(o=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&o!==void 0?o:ot},t}(ut),En=new A(function(e){return e.complete()}),Ve=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function pt(e){return C(e==null?void 0:e.then)}function dt(e){return C(e[He])}function ht(e){return Symbol.asyncIterator&&C(e==null?void 0:e[Symbol.asyncIterator])}function vt(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Tn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mt=Tn();function gt(e){return C(e==null?void 0:e[mt])}function yt(e){return pn(this,arguments,function(){var n,r,o,i;return nt(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,ne(n.read())];case 3:return r=s.sent(),o=r.value,i=r.done,i?[4,ne(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,ne(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function _t(e){return C(e==null?void 0:e.getReader)}function oe(e){if(e instanceof A)return e;if(e!=null){if(dt(e))return In(e);if(Ve(e))return Cn(e);if(pt(e))return On(e);if(ht(e))return wt(e);if(gt(e))return kn(e);if(_t(e))return $n(e)}throw vt(e)}function In(e){return new A(function(t){var n=e[He]();if(C(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Cn(e){return new A(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function On(e){return new A(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,at)})}function kn(e){return new A(function(t){var n,r;try{for(var o=ee(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.complete()})}function wt(e){return new A(function(t){Pn(e,t).catch(function(n){return t.error(n)})})}function $n(e){return wt(yt(e))}function Pn(e,t){var n,r,o,i;return fn(this,void 0,void 0,function(){var s,a;return nt(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=dn(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),o={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function z(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function bt(e,t){return t===void 0&&(t=0),re(function(n,r){n.subscribe(new fe(r,function(o){return z(r,e,function(){return r.next(o)},t)},function(){return z(r,e,function(){return r.complete()},t)},function(o){return z(r,e,function(){return r.error(o)},t)}))})}function xt(e,t){return t===void 0&&(t=0),re(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function An(e,t){return oe(e).pipe(xt(t),bt(t))}function Ln(e,t){return oe(e).pipe(xt(t),bt(t))}function Rn(e,t){return new A(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Dn(e,t){return new A(function(n){var r;return z(n,t,function(){r=e[mt](),z(n,t,function(){var o,i,s;try{o=r.next(),i=o.value,s=o.done}catch(a){n.error(a);return}s?n.complete():n.next(i)},0,!0)}),function(){return C(r==null?void 0:r.return)&&r.return()}})}function St(e,t){if(!e)throw new Error("Iterable cannot be null");return new A(function(n){z(n,t,function(){var r=e[Symbol.asyncIterator]();z(n,t,function(){r.next().then(function(o){o.done?n.complete():n.next(o.value)})},0,!0)})})}function Fn(e,t){return St(yt(e),t)}function Nn(e,t){if(e!=null){if(dt(e))return An(e,t);if(Ve(e))return Rn(e,t);if(pt(e))return Ln(e,t);if(ht(e))return St(e,t);if(gt(e))return Dn(e,t);if(_t(e))return Fn(e,t)}throw vt(e)}function jn(e,t){return t?Nn(e,t):oe(e)}function Et(e,t){return re(function(n,r){var o=0;n.subscribe(new fe(r,function(i){r.next(e.call(t,i,o++))}))})}var Mn=Array.isArray;function Gn(e,t){return Mn(t)?e.apply(void 0,te([],Z(t))):e(t)}function Hn(e){return Et(function(t){return Gn(e,t)})}function Vn(e,t,n,r,o,i,s,a){var l=[],c=0,p=0,w=!1,f=function(){w&&!l.length&&!c&&t.complete()},y=function(d){return c<r?u(d):l.push(d)},u=function(d){i&&t.next(d),c++;var v=!1;oe(n(d,p++)).subscribe(new fe(t,function(h){o==null||o(h),i?y(h):t.next(h)},function(){v=!0},void 0,function(){if(v)try{c--;for(var h=function(){var S=l.shift();s?z(t,s,function(){return u(S)}):u(S)};l.length&&c<r;)h();f()}catch(S){t.error(S)}}))};return e.subscribe(new fe(t,y,function(){w=!0,f()})),function(){a==null||a()}}function Tt(e,t,n){return n===void 0&&(n=1/0),C(t)?Tt(function(r,o){return Et(function(i,s){return t(r,i,o,s)})(oe(e(r,o)))},n):(typeof t=="number"&&(n=t),re(function(r,o){return Vn(r,o,e,n)}))}var zn=["addListener","removeListener"],Bn=["addEventListener","removeEventListener"],Wn=["on","off"];function pe(e,t,n,r){if(C(n)&&(r=n,n=void 0),r)return pe(e,t,n).pipe(Hn(r));var o=Z(Un(e)?Bn.map(function(a){return function(l){return e[a](t,l,n)}}):Xn(e)?zn.map(It(e,t)):Zn(e)?Wn.map(It(e,t)):[],2),i=o[0],s=o[1];if(!i&&Ve(e))return Tt(function(a){return pe(a,t,n)})(oe(e));if(!i)throw new TypeError("Invalid event target");return new A(function(a){var l=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return a.next(1<c.length?c:c[0])};return i(l),function(){return s(l)}})}function It(e,t){return function(n){return function(r){return e[n](t,r)}}}function Xn(e){return C(e.addListener)&&C(e.removeListener)}function Zn(e){return C(e.on)&&C(e.off)}function Un(e){return C(e.addEventListener)&&C(e.removeEventListener)}function Yn(e){return e<=0?function(){return En}:re(function(t,n){var r=0;t.subscribe(new fe(n,function(o){++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function ze(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new ut}:t,r=e.resetOnError,o=r===void 0?!0:r,i=e.resetOnComplete,s=i===void 0?!0:i,a=e.resetOnRefCountZero,l=a===void 0?!0:a;return function(c){var p=null,w=null,f=null,y=0,u=!1,d=!1,v=function(){w==null||w.unsubscribe(),w=null},h=function(){v(),p=f=null,u=d=!1},S=function(){var x=p;h(),x==null||x.unsubscribe()};return re(function(x,T){y++,!d&&!u&&v();var I=f=f!=null?f:n();T.add(function(){y--,y===0&&!d&&!u&&(w=Be(S,l))}),I.subscribe(T),p||(p=new Ie({next:function(k){return I.next(k)},error:function(k){d=!0,v(),w=Be(h,o,k),I.error(k)},complete:function(){u=!0,v(),w=Be(h,s),I.complete()}}),jn(x).subscribe(p))})(c)}}function Be(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return t===!0?(e(),null):t===!1?null:t.apply(void 0,te([],Z(n))).pipe(Yn(1)).subscribe(function(){return e()})}pe(window,"resize").pipe(ze({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1}));pe(window,"keypress").pipe(ze({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1}));const ei=pe(window,"keyup").pipe(ze({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1})),qn=e=>new Promise(t=>{const n=document.createElement("input");n.type="file",n.accept=(e||[]).join(","),n.click(),n.addEventListener("change",r=>{const o=(r.dataTransfer||r.target).files;n.remove(),t(o)})}),Jn=e=>{L()&&(e.on("connect",()=>{window.electron.ipcRenderer.invoke("client","connect",!0)}),e.on("disconnect",()=>{window.electron.ipcRenderer.invoke("client","connect",!1)}))},Qn=()=>{window.electron.ipcRenderer.invoke("window","minimize")},Kn=()=>{window.electron.ipcRenderer.invoke("window","maximize")},er=e=>{if(L())window.electron.ipcRenderer.invoke("window","fullscreen",e);else return e?document.body.requestFullscreen():document.exitFullscreen()},tr=()=>{window.electron.ipcRenderer.invoke("close")},L=()=>"electron"in window,nr=e=>{if(L())return window.electron.ipcRenderer.invoke("save",e);{const t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","scene.json"),n.click()}},rr=async()=>{if(L())return window.electron.ipcRenderer.invoke("load");{const e=await qn(["application/json"]);return new Promise((t,n)=>{if(e.length){const r=new FileReader;r.addEventListener("load",()=>{try{t(JSON.parse(r.result))}catch(o){n(o)}}),r.readAsText(e[0])}else t()})}},or=e=>{L()&&window.electron.ipcRendererReceive("dialog",e)},ir=e=>{L()?window.electron.ipcRendererReceive("window",(t,n)=>{switch(t){case"fullscreen":e(n);break}}):window.addEventListener("fullscreenchange",()=>{e(document.fullscreenEnabled)})},sr=()=>L()?window.electron.ipcRenderer.invoke("loadConfig"):JSON.parse(window.localStorage.getItem("config")),ar=e=>L()?window.electron.ipcRenderer.invoke("saveConfig",e):window.localStorage.setItem("config",JSON.stringify(e)),lr=()=>L()?window.electron.ipcRenderer.invoke("getCurrentVersion"):"1.0.0-beta.42",cr=async()=>{const t=(()=>{const r=[],o=[!1,!0],i=[400,500,600,700,800,900];for(let s=0;s<o.length;s++)for(let a=0;a<i.length;a++)r.push({weight:i[a],italic:o[s]});return r})(),n=[{group:"DevTerm",value:'"5x7-ISO8859-1"',name:"5x7-ISO8859-1",variants:[]},{group:"DevTerm",value:'"6x12-ISO8859-1"',name:"6x12-ISO8859-1",variants:[]},{group:"DevTerm",value:'"7x14-ISO8859-1"',name:"7x14-ISO8859-1",variants:[]},{group:"DevTerm",value:'"Px437_CompaqThin_8x16"',name:"Px437_CompaqThin_8x16",variants:[]},{group:"Web",value:"sans-serif",name:"Sans-serif",monospace:!1,variants:t},{group:"Web",value:"serif",name:"Serif",monospace:!1,variants:t},{group:"Web",value:"monospace",name:"Monospace",monospace:!0,variants:t},{group:"Web",value:"fantasy",name:"Fantasy",monospace:!1,variants:t},{group:"Web",value:"cursive",name:"Cursive",monospace:!1,variants:t}];return L()?n.concat(await window.electron.ipcRenderer.invoke("getFonts")):[...n,{group:"System",value:'"Arial"',name:"Arial",monospace:!1,variants:t},{group:"System",value:'"Verdana"',name:"Verdana",monospace:!1,variants:t},{group:"System",value:'"Helvetica"',name:"Helvetica",monospace:!1,variants:t},{group:"System",value:'"Tahoma"',name:"Tahoma",monospace:!1,variants:t},{group:"System",value:'"Trebuchet MS"',name:"Trebuchet MS",monospace:!1,variants:t},{group:"System",value:'"Times New Roman"',name:"Times New Roman",monospace:!1,variants:t},{group:"System",value:'"Georgia"',name:"Georgia",monospace:!1,variants:t},{group:"System",value:'"Garamond"',name:"Garamond",monospace:!1,variants:t},{group:"System",value:'"Courier New"',name:"Courier New",monospace:!0,variants:t},{group:"System",value:'"Brush Script MT"',name:"Brush Script MT",monospace:!1,variants:t}]};var Ct=6,ti=16,U=384,$={SIZE_8_16_THIN_1:0,SIZE_8_16_THIN_2:4,SIZE_5_7:1,SIZE_6_12:2,SIZE_7_14:3},ur={[$.SIZE_5_7]:76,[$.SIZE_6_12]:63,[$.SIZE_7_14]:54,[$.SIZE_8_16_THIN_1]:47,[$.SIZE_8_16_THIN_2]:47},ni={[$.SIZE_8_16_THIN_1]:[8,16],[$.SIZE_8_16_THIN_2]:[8,16],[$.SIZE_7_14]:[7,14],[$.SIZE_6_12]:[6,12],[$.SIZE_5_7]:[5,7]},G={LEFT:0,CENTER:1,RIGHT:2},Ot=()=>({align:G.LEFT,font:$.SIZE_8_16_THIN_1,margin:0,underline:0,lineSpace:0,density:Ct,underLine:0,wordGap:0}),fr="/assets/5x7-ISO8859-1.1e468e9f.ttf",pr="/assets/6x12-ISO8859-1.4c4c24d1.ttf",dr="/assets/7x14-ISO8859-1.b8471bdd.ttf",hr="/assets/Px437_CompaqThin_8x16.ccffc04f.ttf";const vr=()=>{const e=[["5x7-ISO8859-1",`url(${fr})`],["6x12-ISO8859-1",`url(${pr})`],["7x14-ISO8859-1",`url(${dr})`],["Px437_CompaqThin_8x16",`url(${hr})`]];return Promise.all(e.map(async t=>{console.log("load font",t[0],t[1]);const n=new FontFace(...t);return await n.load(),document.fonts.add(n),n}))},ri={[$.SIZE_5_7]:{fontFamily:"5x7-ISO8859-1",fontSize:7},[$.SIZE_6_12]:{fontFamily:"6x12-ISO8859-1",fontSize:12},[$.SIZE_7_14]:{fontFamily:"7x14-ISO8859-1",fontSize:14},[$.SIZE_8_16_THIN_1]:{fontFamily:"Px437_CompaqThin_8x16",fontSize:16},[$.SIZE_8_16_THIN_2]:{fontFamily:"Px437_CompaqThin_8x16",fontSize:16}};var Ce,mr=new Uint8Array(16);function gr(){if(!Ce&&(Ce=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ce))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ce(mr)}var yr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _r(e){return typeof e=="string"&&yr.test(e)}var P=[];for(var We=0;We<256;++We)P.push((We+256).toString(16).substr(1));function wr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]).toLowerCase();if(!_r(n))throw TypeError("Stringified UUID is invalid");return n}function br(e,t,n){e=e||{};var r=e.random||(e.rng||gr)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return wr(r)}class Oe{constructor(t){const{id:n,type:r,value:o,visible:i}=t||{};this.id=n||br(),this.type=r,this.value=o,this.visible=i===void 0?!0:i}toJSON(){return{id:this.id,type:this.type,value:this.value,visible:this.visible}}}var xr=384,{createCanvas:de,loadImage:oi,Canvas:ii}=sn,ie=()=>({width:null,rotate:!1,flipX:!1,flipY:!1,invert:!1,grayscale:!1}),Y=(e,t)=>(t=g(g({},ie()),t),t.rotate&&(e=Cr(e)),e=Tr(e,t.width),(t.flipX||t.flipY)&&(e=Ir(e,t.flipX,t.flipY)),t.invert&&(e=Er(e)),t.grayscale&&(e=Or(e)),e=Sr(e),e),Sr=e=>{const t=e.getContext("2d"),n=t.getImageData(0,0,t.canvas.width,t.canvas.height),r=n.data;for(let o=0;o<r.length;o+=4)r[o+3]===0&&(r[o]=255,r[o+1]=255,r[o+2]=255,r[o+3]=255);return t.putImageData(n,0,0),e},Er=e=>{const t=e.getContext("2d"),n=t.getImageData(0,0,t.canvas.width,t.canvas.height),r=n.data;for(let o=0;o<r.length;o+=4)r[o]=255-r[o],r[o+1]=255-r[o+1],r[o+2]=255-r[o+2];return t.putImageData(n,0,0),e},Tr=(e,t)=>{t=Math.min(e.width,Math.min(t||e.width,xr));const n=t*(e.height/e.width),r=de(t,n);return r.getContext("2d").drawImage(e,0,0,t,n),r},Ir=(e,t,n)=>{const r=de(e.width,e.height),o=r.getContext("2d");console.log(1-t*2,1-n*2);const i=1-t*2,s=1-n*2;return o.translate(t*e.width,n*e.height),o.scale(i,s),o.drawImage(e,0,0,e.width,e.height),r},Cr=e=>{let t=e.getContext("2d");const n=de(e.height,e.width);return t=n.getContext("2d"),t.translate(e.height,0),t.rotate(Math.PI/2),t.drawImage(e,0,0),n},Or=e=>{const t=e.getContext("2d");return t.putImageData(nn(t.getImageData(0,0,e.width,e.height)),0,0),e},kr=(e,t)=>{const n=de();try{return rn(n,e,t),n}catch(r){throw new Error(r)}};async function $r(e,t={}){t=g({margin:0},t);const n=de(t.width||1,t.width||1);return new Promise(r=>{on.toCanvas(n,e,t,o=>{if(o)throw o;r(n)})})}var Pr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("select",{attrs:{required:e.required},on:{change:function(r){return e.$emit("input",r.target.value)}}},[e._l(e.singleOptions,function(r){return n("option",{key:r.value,domProps:{value:r.value,selected:r.value===e.preparedValue}},[e._v(" "+e._s(r.title)+" ")])}),e._l(e.groupedOptions,function(r){return n("optgroup",{key:r.label,attrs:{label:r.label}},e._l(r.options,function(o){return n("option",{key:o.value,domProps:{value:o.value,selected:o.value===e.preparedValue}},[e._v(" "+e._s(o.title)+" ")])}),0)})],2)},Ar=[];function B(e,t,n,r,o,i,s,a){var l=typeof e=="function"?e.options:e;t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i);var c;if(s?(c=function(f){f=f||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!f&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(f=__VUE_SSR_CONTEXT__),o&&o.call(this,f),f&&f._registeredComponents&&f._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(y,u){return c.call(u),p(y,u)}}else{var w=l.beforeCreate;l.beforeCreate=w?[].concat(w,c):[c]}return{exports:e,options:l}}const Lr={props:{options:{type:Array,default(){return[1,2,3,4]}},value:{type:[String,Number],default:null},required:{type:Boolean,default:!1}},computed:{preparedValue(){return this.value===null?"":String(this.value)},preparedOptions(){return this.options.map(e=>typeof e=="object"&&"title"in e?ke.create(e):ke.create({value:e}))},singleOptions(){return this.preparedOptions.filter(e=>!e.group)},groupedOptions(){return Object.entries(this.preparedOptions.reduce((e,t)=>(t.group&&(e[t.group]=(e[t.group]||[]).concat(t)),e),{})).map(([e,t])=>({label:e,options:t}))}}};var Q,ae,le;class ke{constructor(t){ye(this,Q,void 0);ye(this,ae,void 0);ye(this,le,void 0);t&&typeof t!="object"&&(t={value:t});const{value:n,title:r,group:o}=t||{value:""};_e(this,Q,n||""),_e(this,ae,r||V(this,Q)),_e(this,le,o)}get value(){return V(this,Q)}get title(){return V(this,ae)}get group(){return V(this,le)}toJSON(){return{value:V(this,Q),title:V(this,ae),group:V(this,le)}}static create(...t){return new this(...t)}}Q=new WeakMap,ae=new WeakMap,le=new WeakMap;const kt={};var Rr=B(Lr,Pr,Ar,!1,Dr,null,null,null);function Dr(e){for(let t in kt)this[t]=kt[t]}var si=function(){return Rr.exports}();const Fr=()=>[{native:!0,title:"Align (native)",value:"setAlign",group:"Layout"},{native:!0,title:"Margin (native)",value:"setMargin",group:"Layout"},{native:!0,title:"Font (native)",value:"setFont",group:"Layout"},{native:!0,title:"LineSpace (native)",value:"setLineSpace",group:"Layout"},{native:!0,title:"WordGap (native)",value:"setWordGap",group:"Layout"},{native:!1,title:"Spacer",value:"spacer",group:"Layout"},{native:!1,title:"Grid",value:"grid",group:"Layout"},{native:!1,title:"Image",value:"image",group:"Content"},{native:!1,title:"QRCode",value:"qrCode",group:"Content"},{native:!1,title:"Barcode",value:"barcode",group:"Content"},{native:!1,title:"Text",value:"text",group:"Content"},{native:!1,title:"Table",value:"table",group:"Content"},{native:!0,title:"Text (native)",value:"nativeText",group:"Content"},{native:!0,title:"Reset (native)",value:"reset",group:"General"},{native:!0,title:"Feed Pitch (native)",value:"feedPitch",group:"General"},{native:!0,title:"Cutline (native)",value:"cutLine",group:"General"},{native:!0,title:"Density (native)",value:"setDensity",group:"General"}],ai=()=>[new ke({title:"Add new Action\u2026",value:""}),...Fr().map(e=>new ke(e))],li=e=>{let t;switch(e){case"setLineSpace":t=0;break;case"setWordGap":t=0;break;case"setMargin":t=0;break;case"setDensity":t=1;break;case"setFont":t=$.SIZE_8_16_THIN_1;break;case"setAlign":t=G.LEFT;break;case"feedPitch":t={value:1,type:"font"};break;case"text":t=Xe();break;case"table":t=Br();break;case"nativeText":t="Text";break;case"grid":t=Mr();break;case"image":t=Gr();break;case"qrCode":t=Hr();break;case"barcode":t=Vr();break;case"spacer":t=zr();break}return new Oe({type:e,value:t})},ci=e=>{const t=Ot();return e.filter(n=>n.visible).map(n=>jr(n,t)).filter(Boolean)},Nr=e=>Array(ur[e]).fill("").map((t,n)=>n%2==0?"=":"-").join(""),jr=(e,t)=>{switch(e.type){case"setMargin":t.margin=e.value;break;case"setAlign":t.align=e.value;break;case"setLineSpace":t.lineSpace=e.value;break;case"setWordGap":t.wordGap=e.value;break;case"setFont":t.font=Number(e.value);break;case"setDensity":t.density=Number(e.value);break;case"reset":Object.assign(t,Ot());break;case"cutLine":return{id:e.id,component:()=>O(()=>import("./NativeText.397300c3.js"),["assets/NativeText.397300c3.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:K(g({},t),{margin:0,wordGap:0,lineSpace:0,density:Ct}),props:{value:Nr(t.font)}};case"spacer":return{id:e.id,component:()=>O(()=>import("./SpacerCanvas.1348223c.js"),["assets/SpacerCanvas.1348223c.js","assets/SpacerCanvas.52030cc2.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"grid":return{id:e.id,component:()=>O(()=>import("./GridCanvas.75660366.js"),["assets/GridCanvas.75660366.js","assets/GridCanvas.b667bdd0.css","assets/NativeText.397300c3.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"barcode":return{id:e.id,component:()=>O(()=>import("./BarcodeCanvas.e781c90a.js"),["assets/BarcodeCanvas.e781c90a.js","assets/BarcodeCanvas.c3e7a34f.css","assets/NativeText.397300c3.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"qrCode":return{id:e.id,component:()=>O(()=>import("./QrCodeCanvas.1d117b62.js"),["assets/QrCodeCanvas.1d117b62.js","assets/QrCodeCanvas.61d59f7a.css","assets/NativeText.397300c3.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"image":return{id:e.id,component:()=>O(()=>import("./ImageCanvas.81c6be3d.js"),["assets/ImageCanvas.81c6be3d.js","assets/ImageCanvas.2ca62634.css","assets/NativeText.397300c3.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"text":return{id:e.id,component:()=>O(()=>import("./TextCanvas.9fc8485a.js"),["assets/TextCanvas.9fc8485a.js","assets/TextCanvas.09b213aa.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"table":return{id:e.id,component:()=>O(()=>import("./TableCanvas.83b03eb7.js"),["assets/TableCanvas.83b03eb7.js","assets/TableCanvas.17b16592.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"nativeText":return{id:e.id,component:()=>O(()=>import("./NativeText.397300c3.js"),["assets/NativeText.397300c3.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"feedPitch":return{id:e.id,component:()=>O(()=>import("./FeedPitch.9963ea01.js"),["assets/FeedPitch.9963ea01.js","assets/FeedPitch.3fa7fa3d.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e.value)}}return null},Mr=()=>({widths:[1],data:[[]],options:{columnGutter:0,rowGutter:0},imageOptions:ie()}),Xe=()=>({text:"Sample",options:R(),imageOptions:ie()}),Gr=()=>({file:null,imageOptions:ie()}),Hr=()=>({text:"Sample",options:{errorCorrectionLevel:"M",margin:0,scale:4,small:!1},imageOptions:ie()}),Vr=()=>({text:"Sample",options:{format:"",height:100,font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,margin:10,displayValue:!0,flat:!1},imageOptions:ie()}),zr=()=>({value:0}),W=Object.freeze({LEFT:"left",CENTER:"center",RIGHT:"right"}),R=()=>({fontSize:16,align:W.LEFT,lineSpace:0,wordGap:0,margin:0,fontFamily:"sans-serif",color:"#000",weight:400,italic:!1,underline:!1,justify:!1}),Br=()=>({data:[[]],columns:[$e()],options:{columnGutter:0,rowGutter:0,headActive:!1,footActive:!1,useColumnStyles:!1,bodyOptions:$e(),headOptions:$e(),footOptions:$e()}}),$e=()=>({width:1,bodyOptions:R(),headOptions:R(),footOptions:R()});var Wr=[{type:"reset"},{id:"4374d709-ab96-4d35-84b9-b4f08f29e6de",type:"table",value:{data:[["test test test test test test test test test test test test test ",2,3],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],options:{columnGutter:0,rowGutter:0},headActive:!1,footActive:!1,columns:[{width:1,bodyOptions:{fontSize:16,align:W.LEFT,lineSpace:0,wordGap:0,margin:0,fontFamily:'"Arial"',color:"#000",weight:400,italic:!1,underline:!0},headOptions:R(),footOptions:R()},{width:1,bodyOptions:{fontSize:16,align:W.CENTER,lineSpace:0,wordGap:0,margin:0,fontFamily:'"Arial"',color:"#000",weight:400,italic:!1},headOptions:R(),footOptions:R()},{width:1,bodyOptions:{fontSize:16,align:W.RIGHT,lineSpace:0,wordGap:0,margin:0,fontFamily:'"Arial"',color:"#000",weight:400,italic:!1},headOptions:R(),footOptions:R()}]},visible:!0},{id:"6319ab91-5740-49c0-8265-1d05d97014a3",type:"grid",value:{widths:[1,1],data:[[{id:"7d4b8881-37d3-4b80-98e2-dbef273fd321",type:"spacer",value:{value:200},visible:!0},{id:"7d4b8881-37d3-4b80-98e2-dbef273fd320",type:"text",value:{text:`Item 1.
Item 2.
Item 3.
Item 4.`,options:{fontSize:"24",align:"left",lineSpace:"30",wordGap:0,margin:0,fontFamily:null,color:"#000",weight:400,italic:!1},imageOptions:{width:192,rotate:!1,flipX:!1,flipY:!1,invert:!1,grayscale:!1}},visible:!0}],[{id:"cafb2f8d-add1-4c34-9c1e-6f19c63732ac",type:"text",value:{text:`0,00
0,00
0,00
0,00`,options:{fontSize:"24",align:W.LEFT,lineSpace:"30",wordGap:0,margin:0,fontFamily:null,color:"#000",weight:400,italic:!1},imageOptions:{width:192,rotate:!1,flipX:!1,flipY:!1,invert:!1,grayscale:!1}},visible:!0}]],options:{columnGutter:0,rowGutter:0},imageOptions:{width:null,rotate:!1,flipX:!1,flipY:!1,invert:!1,grayscale:!1}},visible:!0},{type:"feedPitch",value:{value:15,type:"font"}}],Xr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-menu"},[n("ul",[e._t("default")],2)])},Zr=[];const Ur={},$t={};var Yr=B(Ur,Xr,Zr,!1,qr,"6a61d96c",null,null);function qr(e){for(let t in $t)this[t]=$t[t]}var Jr=function(){return Yr.exports}(),Qr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",e._g({staticClass:"base-generic-button"},e.$listeners),[e._t("default",function(){return[e._v(e._s(e.text))]})],2)},Kr=[];const eo={props:{text:{type:String,default:"Button Text"}}},Pt={};var to=B(eo,Qr,Kr,!1,no,"0c7b8858",null,null);function no(e){for(let t in Pt)this[t]=Pt[t]}var ro=function(){return to.exports}(),oo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"app-menu-item",class:{selected:e.selected}},[n("base-generic-button",e._g(e._b({},"base-generic-button",e.$attrs,!1),e.$listeners),[e._t("default",function(){return[e._v(e._s(e.text))]})],2)],1)},io=[];const so={components:{BaseGenericButton:ro},inheritAttrs:!1,props:{selected:{type:Boolean,default:!1},text:{type:String,default:null}}},At={};var ao=B(so,oo,io,!1,lo,"1b42e491",null,null);function lo(e){for(let t in At)this[t]=At[t]}var N=function(){return ao.exports}(),co=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",e._g(e._b({staticClass:"app-menu-text"},"li",e.$attrs,!1),e.$listeners),[e._t("default",function(){return[n("span",{domProps:{innerHTML:e._s(e.text)}})]})],2)},uo=[];const fo={inheritAttrs:!1,props:{text:{type:String,default:null}}},Lt={};var po=B(fo,co,uo,!1,ho,"72abcabd",null,null);function ho(e){for(let t in Lt)this[t]=Lt[t]}var Pe=function(){return po.exports}(),vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"app-menu-spacer"},[e._t("default")],2)},mo=[];const go={},Rt={};var yo=B(go,vo,mo,!1,_o,"d155e842",null,null);function _o(e){for(let t in Rt)this[t]=Rt[t]}var Ze=function(){return yo.exports}(),wo=function(){var e=this,t=e.$createElement;return e._self._c,e._m(0)},bo=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"app-menu-divider"},[n("i")])}];const xo={},Dt={};var So=B(xo,wo,bo,!1,Eo,"53fd4f5e",null,null);function Eo(e){for(let t in Dt)this[t]=Dt[t]}var se=function(){return So.exports}(),To=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",class:{ready:e.ready},style:e.style},[n("app-menu",{staticClass:"header"},e._l(e.headerItems,function(r,o){return n(r.component,e._g(e._b({key:o,tag:"component"},"component",r.props,!1),r.on))}),1),n("div",{staticClass:"app-content"},[!e.$client.connected&&e.ready?n("view-start",{on:{apply:e.onApplyViewStart}}):e.currentView===e.VIEWS.PRINTER?n("view-printer",{attrs:{colors:e.colors},model:{value:e.printerTemplate,callback:function(r){e.printerTemplate=r},expression:"printerTemplate"}}):e.currentView===e.VIEWS.INFO?n("view-info"):e._e()],1),n("app-menu",{staticClass:"footer"},e._l(e.footerItems,function(r,o){return n(r.component,e._g(e._b({key:o,tag:"component"},"component",r.props,!1),r.on))}),1),e._l(e.$errorList.errors,function(r,o){return n("dialog-error",e._b({key:o,attrs:{"init-open":""}},"dialog-error",r,!1))}),e._l(e.$dialog.prompts,function(r,o){return n("dialog-prompt",e._b({key:o,attrs:{"init-open":""}},"dialog-prompt",r,!1))}),e.ready?n("dialog-remote",{ref:"dialogRemote"}):e._e(),e.ready?n("dialog-server",{ref:"dialogServer"}):e._e(),e.ready?n("dialog-options",{ref:"dialogOptions"}):e._e(),e._m(0)],2)},Io=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"display-look"},[n("div",{staticClass:"scanlines"})])}];const q={NONE:null,INFO:"info",START:"start",PRINTER:"priner"},Co={amber:{primary:[255,204,0],secondary:[0,0,0],printer:{preview:{background:[255,204,0],foreground:[0,0,0]}}},green:{primary:[51,255,0],secondary:[0,0,0],printer:{preview:{background:[51,255,0],foreground:[0,0,0]}}},whiteBlack:{primary:[255,255,255],secondary:[0,0,0],printer:{preview:{background:[255,255,255],foreground:[0,0,0]}}},blackWhite:{primary:[0,0,0],secondary:[255,255,255],printer:{preview:{background:[0,0,0],foreground:[255,255,255]}}}};function Oo(){return Wr.map(e=>new Oe(e))}const ko={components:{ViewPrinter:()=>O(()=>import("./Printer.0011c769.js").then(function(e){return e.P}),["assets/Printer.0011c769.js","assets/Printer.71e2f60f.css","assets/View.c5db1c08.js","assets/TextButton.820a310a.js","assets/TextButton.55961f21.css","assets/DropDown.6c5914d5.js","assets/DropDown.a92b0b2c.css","assets/Dialog.3e793e7b.js","assets/Dialog.5c008ae1.css"]),ViewStart:()=>O(()=>import("./Start.5308c72b.js"),["assets/Start.5308c72b.js","assets/Start.d83307a1.css","assets/View.c5db1c08.js","assets/TextButton.820a310a.js","assets/TextButton.55961f21.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),ViewInfo:()=>O(()=>import("./Info.5d995649.js"),["assets/Info.5d995649.js","assets/Info.992aea81.css","assets/View.c5db1c08.js","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),AppMenu:Jr,AppMenuItem:N,AppMenuText:Pe,AppMenuSpacer:Ze,AppMenuDivider:se,DialogError:()=>O(()=>import("./Error.c4fc1a96.js"),["assets/Error.c4fc1a96.js","assets/Error.9832724b.css","assets/Dialog.3e793e7b.js","assets/Dialog.5c008ae1.css","assets/TextButton.820a310a.js","assets/TextButton.55961f21.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),DialogRemote:()=>O(()=>import("./Remote.7b3d28e7.js"),["assets/Remote.7b3d28e7.js","assets/Remote.faa484f5.css","assets/Dialog.3e793e7b.js","assets/Dialog.5c008ae1.css","assets/TextButton.820a310a.js","assets/TextButton.55961f21.css","assets/DropDown.6c5914d5.js","assets/DropDown.a92b0b2c.css","assets/CheckBox.c62c499c.js","assets/CheckBox.12afbd75.css","assets/TextField.94926ab4.js","assets/TextField.d3378861.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),DialogServer:()=>O(()=>import("./Server.af1a0d4c.js"),["assets/Server.af1a0d4c.js","assets/Server.4f2589f0.css","assets/Dialog.3e793e7b.js","assets/Dialog.5c008ae1.css","assets/TextButton.820a310a.js","assets/TextButton.55961f21.css","assets/DropDown.6c5914d5.js","assets/DropDown.a92b0b2c.css","assets/Content.c01e907a.js","assets/Content.182197b6.css","assets/TextField.94926ab4.js","assets/TextField.d3378861.css","assets/FileSelect.4c404614.js","assets/FileSelect.8c5eefc3.css","assets/CheckBox.c62c499c.js","assets/CheckBox.12afbd75.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),DialogOptions:()=>O(()=>import("./Options.1568bbe3.js"),["assets/Options.1568bbe3.js","assets/Options.5466c3cb.css","assets/Dialog.3e793e7b.js","assets/Dialog.5c008ae1.css","assets/TextButton.820a310a.js","assets/TextButton.55961f21.css","assets/TextField.94926ab4.js","assets/TextField.d3378861.css","assets/DropDown.6c5914d5.js","assets/DropDown.a92b0b2c.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),DialogPrompt:()=>O(()=>import("./Prompt.ed139d69.js"),["assets/Prompt.ed139d69.js","assets/Prompt.ba8cf0c2.css","assets/Dialog.3e793e7b.js","assets/Dialog.5c008ae1.css","assets/TextButton.820a310a.js","assets/TextButton.55961f21.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"])},data(){return{VIEWS:q,currentView:q.PRINTER,ready:!1,fullscreen:!1,printerTemplate:Oo()}},computed:{headerItems(){const e=[{component:N,on:{click:this.onClickNew},props:{text:"New"}},{component:se},{component:N,on:{click:this.onClickSave},props:{text:"Save"}},{component:N,title:"Load",on:{click:this.onClickLoad},props:{text:"Load"}},{component:se}];return[...this.$client.connected&&[{component:N,on:{click:()=>this.currentView=q.INFO},props:{selected:this.currentView===q.INFO,text:"Info"}},{component:N,on:{click:()=>this.currentView=q.PRINTER},props:{selected:this.currentView===q.PRINTER,text:"Printer"}}]||[],{component:Ze},...this.$client.connected&&this.currentView===q.PRINTER&&e||[],{component:N,on:{click:this.onClickOptions},props:{text:"Options"}},L()&&[{component:se},{component:N,on:{click:this.onClickClose},props:{text:"Close"}}]].flat().filter(Boolean)},footerItems(){return[L()&&[{component:N,on:{click:this.onClickMinimizeWindow},props:{text:"Minimize"}},{component:N,on:{click:this.onClickMaximizeWindow},props:{text:"Maximize"}}].flat(),{component:N,on:{click:this.onClickFullscreen},props:{selected:this.fullscreen,text:"Fullscreen"}},{component:Ze},this.hasServer&&[{component:Pe,on:{click:this.showServerDialog},props:{class:{connection:!0,connected:this.$server.options.active},text:`${this.$server.options.active?`Server (*:${this.$server.options.port}${this.$server.options.secure?"/SSL":""})`:"Server Offline"}`}},{component:se}],{component:Pe,on:{click:this.showRemoteDialog},props:{class:{connection:!0,connected:this.clientConnected},text:`${this.clientConnected?`Online (${this.$client.host}:${this.$client.port}${this.$client.secure?"/SSL":""})`:"Offline"}`}},{component:se},{component:Pe,on:{click:()=>{window.open("https://github.com/ThornWalli/devterm-toolbox/releases")}},props:{class:"info-version",text:this.version}}].flat().filter(Boolean)},hasServer(){return!this.$server.disabled},version(){return this.$config.version},colors(){return Co[this.$config.data.theme]},clientConnected(){return this.$client.connected},style(){return g(g({"--zoom":`${this.$config.data.zoom}`,"--color-primary":`rgb(${this.colors.primary.join(",")})`,"--color-secondary":`rgb(${this.colors.secondary.join(",")})`},Object.fromEntries(Array(10).fill("").map((e,t)=>[`--color-primary-${(t+1)*10}`,`rgb(${this.colors.primary.join(" ")} / ${(t+1)*10}%)`]))),Object.fromEntries(Array(10).fill("").map((e,t)=>[`--color-secondary-${(t+1)*10}`,`rgb(${this.colors.secondary.join(" ")} / ${(t+1)*10}%)`])))}},async mounted(){await vr(),await this.$config.init(),await this.$server.init(),this.hasServer&&await this.$server.refresh(),await this.$config.load();const e=this.$config.get("profiles").find(({name:t})=>t===this.$config.get("profile"));if(e){const{port:t,host:n,ssl:r,secure:o}=e;if(this.$config.get("startType")&&t)try{this.$server&&this.$config.get("startType")==="local"&&!this.$server.options.active&&await this.$server.start(t,r),n&&await this.$client.connect(t,n,o)}catch{}}this.ready=!0,this.registerListeners()},methods:{registerListeners(){ir(e=>{this.fullscreen=e}),or((e,t)=>{switch(e){case"open":switch(t){case"options":this.showOptionsDialog();break;case"remote":this.showRemoteDialog();break;case"server":this.showServerDialog();break}break}})},onClickMinimizeWindow(){return Qn()},onClickMaximizeWindow(){return Kn()},onClickFullscreen(){return er(!this.fullscreen)},onClickClose(){return tr()},onClickNew(){this.printerTemplate=[]},onClickSave(){return nr(this.printerTemplate)},async onClickLoad(){try{const e=await rr();e&&(this.printerTemplate=e)}catch(e){this.$errorList.add(e)}},onClickOptions(){this.showOptionsDialog()},async onApplyViewStart({type:e}){this.$config.set("startType",e);let t={};switch(e){case"local":t=await this.showServerDialog();break;case"remote":t=await this.showRemoteDialog();break}const{profile:n}=t||{};n&&(this.$config.set("profile",n),await this.$config.save())},showServerDialog(){return this.$refs.dialogServer.show()},showRemoteDialog(){return this.$refs.dialogRemote.show()},showOptionsDialog(){return this.$refs.dialogOptions.show()}}},Ft={};var $o=B(ko,To,Io,!1,Po,"168a6c88",null,null);function Po(e){for(let t in Ft)this[t]=Ft[t]}var Nt=function(){return $o.exports}();class Ao{constructor(){this.errors=[]}add(t,n){typeof t=="object"&&(console.error(t),t.message?(t.type&&(n=t.type),t=t.message):t=JSON.stringify(t));const r={title:n,message:t},o=()=>{this.errors.slice(this.errors.indexOf(r),1)};r.callback=o,this.errors.push(r)}}const jt=F.observable(new Ao);Object.defineProperty(F.prototype,"$errorList",{get(){return jt}});const ui=512,Ae=()=>({theme:"amber",zoom:1,startType:null,ssl:{key:null,cert:null,pfx:null,passphrase:null},profiles:[]}),Lo=()=>({name:null,port:3e3,host:null,secure:!1,ssl:{key:null,cert:null,pfx:null,passphrase:null}}),fi="localhost",Ro="Profile Default";class Do{constructor(){this.data=Ae(),this.version=null,this.fonts=[]}async init(){this.version=await lr(),this.fonts=await cr()}toJSON(){return Object.assign({},this.data,{version:this.version})}get(t){return this.data[t]}set(t,n){typeof t=="string"?this.data[t]=n:typeof t=="object"&&Object.entries(t).forEach(([r,o])=>this.set(r,o))}save(){return ar(this.toJSON())}reset(){return this.data=Ae(),this.save()}async load(){let t;try{t=await sr()}catch{t=Ae()}return console.log(t),this.data=Object.assign(Ae(),t)}saveProfile(t){t.name=t.name||Ro;const n=this.get("profiles");let r=this.get("profiles").find(({name:o})=>o===t.name);return r?(console.log("update profile",r.name,r),n[n.indexOf(r)]=g(g({},r),t)):(console.log("create profile",t.name,t),r=g(g({},Lo()),t),n.push(r)),this.set("profiles",n),this.save()}deleteProfile(t){const n=this.get("profiles"),r=this.get("profiles").find(({name:o})=>o===t);return n.slice(n.indexOf(r),1),this.set("profiles",n),this.save()}}const Fo=F.observable(new Do);Object.defineProperty(F.prototype,"$config",{get(){return Fo}});Object.defineProperty(F.prototype,"$server",{get(){return{init(){return Promise.resolve()},disabled:!0}}});var Ue=9224,Mt=29,No=function(e){const t=et.Buffer.alloc(e.byteLength),n=new Uint8Array(e);for(let r=0;r<t.length;++r)t[r]=n[r];return t},Gt=(e,t)=>{const n=e/8%256,r=e/8/256,o=t%256,i=t/256,s=(n+256*r)*(o+256*i);return{xL:n,xH:r,yL:o,yH:i,k:s}},jo=(e,t)=>{const{k:n}=Gt(e,1),r=Ue/n;return Math.ceil(t/r)},Mo=e=>{const t=e.getContext("2d"),n=jo(e.width,e.height),r=[];for(let o=0;o<n;o++)r.push(t.getImageData(0,e.height/n*o,e.width,e.height/n));return r};function Go(e){const t=(r,o)=>{const i=(o*e.width+r)*4,s=e.data;return{r:s[i],g:s[i+1],b:s[i+2],a:s[i+3]}},n=[];for(let r=0;r<e.height;r++){n[r]=n[r]||[];for(let o=0;o<e.width;o++)n[r][o]=t(o,r)}return n}var Ho=e=>{const t=[],{width:n,height:r}=e,o=Go(e);for(let i=0;i<r;i++){t[i]=new Uint8Array(Math.round(n/8));for(let s=0;s<t[i].length;s++){t[i][s]=0;for(let a=0;a<8;a++){const{r:l,g:c,b:p,a:w}=o[i][s*8+a]||{r:255,g:255,b:255,a:255};((l+c+p)/3/255<.6||w<.6)&&(t[i][s]|=1<<7-a)}}}return t},Vo=(e,t)=>{const{xL:n,xH:r,yL:o,yH:i,k:s}=Gt(e,t),a=[Mt,118,48,0,n,r,o,i];if(a[0]===Mt&&a[1]===118&&a[2]===48&&!(s<=Ue))throw new Error(`Image too large; ${s} > ${Ue}`);return a},zo=async e=>(await Mo(e)).map(r=>{const o=Ho(r);return[et.Buffer.from(Vo(o[0].length*8,r.height))].concat(o.map(i=>No(i)))}).flat();function Ht(e,t,n){const r={font:"18px Arial, sans-serif",sizeToFill:!1,maxFontSizeToFill:!1,lineHeight:1,allowNewLine:!0,lineBreak:"auto",textAlign:"left",verticalAlign:"top",justifyLines:!1,paddingX:0,paddingY:0,fitParent:!1,strokeText:!1,renderHDPI:!0,textDecoration:"none"},o={};for(const m in r)o[m]=n.hasOwnProperty(m)?n[m]:r[m];const i=e.getContext("2d");i.font=o.font,i.textBaseline="bottom";let s=1;const a=typeof window!="undefined"?window.devicePixelRatio:this.devicePixelRatio;if(o.renderHDPI&&a>1){const m={};for(const b in i)m[b]=i[b];const _=e.width,E=e.height;s=a,e.width=_*s,e.height=E*s,e.style.width=_*s*.5+"px",e.style.height=E*s*.5+"px";for(const b in m)try{i[b]=m[b]}catch{}i.scale(s,s)}const l=(o.fitParent?e.parentNode.clientWidth:e.width)/s,c=(o.fitParent?e.parentNode.clientHeight:e.height)/s,p=l-o.paddingX*2,w=c-o.paddingY*2,f=o.font.match(/\d+(px|em|%)/g)?+o.font.match(/\d+(px|em|%)/g)[0].match(/\d+/g):18;let y=0,u=[];const d=[],v={x:0,y:0};let h=0,S;const x="\u200B";t=T(t),I(f),k(),qt(),D();function T(m){do m=m.replace(/\n\n/g,`
`+x+`
`);while(m.includes(`

`));return m}function I(m){S||(S=o.sizeToFill?i.font.split(/\b\d+px\b/i):o.font.split(/\b\d+px\b/i)),i.font=S[0]+m+"px"+S[1]}function k(){isNaN(o.lineHeight)?o.lineHeight.toString().includes("px")?h=parseInt(o.lineHeight):o.lineHeight.toString().includes("%")&&(h=parseInt(o.lineHeight)/100*f):h=f*o.lineHeight}function D(){if(o.sizeToFill){const m=t.trim().split(/\s+/).length;let _=0;const E=o.maxFontSizeToFill!==!1;do if(E)if(++_<=o.maxFontSizeToFill)H(_);else break;else H(++_);while(y<w&&u.join(" ").split(/\s+/).length===m);H(--_)}else ce();o.justifyLines&&o.lineBreak==="auto"&&Wt(),Yt(),Ut(),Zt()}function H(m){I(m),h=m,ce()}function ce(){if(o.allowNewLine){const _=t.trim().split(`
`);for(let E=0,b=0;E<_.length-1;E++)b+=_[E].trim().split(/\s+/).length,d.push(b)}const m=t.trim().split(/\s+/);ve(m),Bt(m),y=u.length*h}function ve(m){let _,E,b,X;m.forEach(function(j,me){if(_="",E=i.measureText(j).width,E>p){for(var M=0;i.measureText(_+j[M]).width<=p&&M<j.length;M++)_+=j[M];b=j.slice(0,M),X=j.slice(M),m.splice(me,1,b,X)}})}function Bt(m){u=[];for(let _=0,E=0;_<m.length;E++)if(u[E]="",o.lineBreak==="auto"){if(i.measureText(u[E]+m[_]).width>p)break;for(;i.measureText(u[E]+m[_]).width<=p&&_<m.length;)if(u[E]+=m[_]+" ",_++,o.allowNewLine){for(let b=0;b<d.length;b++)if(d[b]===_){E++,u[E]="";break}}u[E]=u[E].trim()}else u[E]=m[_],_++}function Wt(){let m,_,E;for(var b=0;b<u.length;b++)E=i.measureText(u[b]).width,(!m||E>m)&&(m=E,_=b);let X,j,me,M,Le;const ge="\u200A";for(b=0;b<u.length;b++)if(b!==_&&(X=u[b].trim().split(/\s+/).length,!(X<=1))){u[b]=u[b].trim().split(/\s+/).join(ge),j=i.measureText(ge).width,me=(m-i.measureText(u[b]).width)/j,M=me/(X-1),Le="";for(let qe=0;qe<M;qe++)Le+=ge;u[b]=u[b].trim().split(ge).join(Le)}}function Xt(m,_,E){const b=i.measureText(m).width;switch(i.textAlign){case"center":_-=b/2;break;case"right":_-=b;break}i.beginPath(),i.moveTo(_,E),i.lineTo(_+b,E),i.stroke()}function Zt(){const m=x+" ";for(let _=0;_<u.length;_++)v.y=parseInt(v.y)+h,u[_]!==m&&(i.fillText(u[_],v.x,v.y),o.strokeText&&i.strokeText(u[_],v.x,v.y),o.textDecoration.toLocaleLowerCase()==="underline"&&Xt(u[_],v.x,v.y))}function Ut(){i.textAlign=o.textAlign,o.textAlign==="center"?v.x=l/2:o.textAlign==="right"?v.x=l-o.paddingX:v.x=o.paddingX}function Yt(){o.verticalAlign==="middle"?v.y=(c-y)/2:o.verticalAlign==="bottom"?v.y=c-y-o.paddingY:v.y=o.paddingY}function qt(){if(typeof t!="string")throw new TypeError("The second parameter must be a String.");if(isNaN(f))throw new TypeError('Cannot parse "font".');if(isNaN(h))throw new TypeError('Cannot parse "lineHeight".');if(o.textAlign.toLocaleLowerCase()!=="left"&&o.textAlign.toLocaleLowerCase()!=="center"&&o.textAlign.toLocaleLowerCase()!=="right")throw new TypeError('Property "textAlign" must be set to either "left", "center", or "right".');if(o.verticalAlign.toLocaleLowerCase()!=="top"&&o.verticalAlign.toLocaleLowerCase()!=="middle"&&o.verticalAlign.toLocaleLowerCase()!=="bottom")throw new TypeError('Property "verticalAlign" must be set to either "top", "middle", or "bottom".');if(typeof o.justifyLines!="boolean")throw new TypeError('Property "justifyLines" must be a Boolean.');if(isNaN(o.paddingX))throw new TypeError('Property "paddingX" must be a Number.');if(isNaN(o.paddingY))throw new TypeError('Property "paddingY" must be a Number.');if(typeof o.fitParent!="boolean")throw new TypeError('Property "fitParent" must be a Boolean.');if(o.lineBreak.toLocaleLowerCase()!=="auto"&&o.lineBreak.toLocaleLowerCase()!=="word")throw new TypeError('Property "lineBreak" must be set to either "auto" or "word".');if(typeof o.sizeToFill!="boolean")throw new TypeError('Property "sizeToFill" must be a Boolean.');if(typeof o.strokeText!="boolean")throw new TypeError('Property "strokeText" must be a Boolean.');if(typeof o.renderHDPI!="boolean")throw new TypeError('Property "renderHDPI" must be a Boolean.');if(o.textDecoration.toLocaleLowerCase()!=="none"&&o.textDecoration.toLocaleLowerCase()!=="underline")throw new TypeError('Property "textDecoration" must be set to either "none" or "underline".')}return u}const pi=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toDataURL("image/png",100)},Bo=(e,t,n)=>{if(t){if(e.width<=t)return e;n=t*(e.height/e.width)}else{if(e.height<=n)return e;t=n*(e.width/e.height)}const r=new OffscreenCanvas(t,n);return r.getContext("2d").drawImage(e,0,0,t,n),r},Wo=async e=>{const t=new window.Image;await new Promise((o,i)=>{t.onload=()=>o(t),t.onerror=()=>i(new Error("image not found")),t.src=e,t.crossOrigin="anonymous"});const n=new OffscreenCanvas(t.naturalWidth,t.naturalHeight);return n.getContext("2d").drawImage(t,0,0),n},di=(e,t,n=1,r=!0)=>{e=Bo(e,U);const o=e.getContext("2d"),i=o.getImageData(0,0,o.canvas.width,o.canvas.height);return r&&Xo(i.data,[t.foreground,t.background],n),o.putImageData(i,0,0),e},Xo=(e,t,n)=>{for(let r=0;r<e.length;r+=4)(e[r]+e[r+1]+e[r+2])/3/255<.6?(e[r]=t[0][0],e[r+1]=t[0][1],e[r+2]=t[0][2],e[r+3]=parseInt(e[r+3]*n)):(e[r]=t[1][0],e[r+1]=t[1][1],e[r+2]=t[1][2],e[r+3]=parseInt(e[r+3]*n))},J=e=>zo(e),Vt=(e,t,n,r)=>{r=g({background:[255,255,255],foreground:[0,0,0]},r);const{fontSize:o,align:i,lineSpace:s,wordGap:a,margin:l,fontFamily:c,weight:p,italic:w,underline:f,justify:y}=g(g({},R()),t);e=String(e);const u=document.createElement("canvas");u.width=n,u.style.display="none",document.body.append(u);const d=u.getContext("2d");d.canvas.style.letterSpacing=`${a}px`;const v=1+s/o,h={font:`${w?"italic ":""}${p} ${o}px ${c}`,lineHeight:v,textAlign:i,verticalAlign:"top",paddingX:l,paddingY:0,fitParent:!1,lineBreak:"auto",strokeText:!1,sizeToFill:!1,maxFontSizeToFill:!0,allowNewLine:!0,justifyLines:y,renderHDPI:!0,textDecoration:f?"underline":"none"},S=Ht(u,e,h);return u.imageSmoothingEnabled=!1,u.height=S.length*o*v,Ht(u,e,h),u.remove(),u},hi=(e,t,n,r)=>{r=g({background:[255,255,255],foreground:[0,0,0]},r);const{fontSize:o,align:i,lineSpace:s,wordGap:a,margin:l,fontFamily:c,weight:p,italic:w}=g({fontSize:12,align:G.LEFT,wordGap:0,lineSpace:0,margin:0,fontFamily:"sans-serif",color:"#000",weight:400,italic:!1},t),f=[0,n*l,0,0];let y=0,u=n;switch(i){case G.RIGHT:y+=n,u-=f[1];break;case G.CENTER:y+=u/2;break;default:y+=f[1],u-=f[1];break}const d=`${w?"italic ":""}${p} ${o}px ${c}`,v=document.createElement("canvas");v.style.display="none",document.body.append(v);const h=v.getContext("2d");h.canvas.style.letterSpacing=`${a}px`,h.font=d;const S=Math.max(s,o)/o,x=e.split(`
`).map(I=>zt(h,I,0,0,o,u)).flat(),T=x.length*o*S+f[0]+f[2];if(!n)switch(n=parseInt(e.split(`
`).reduce((I,k)=>Math.max(h.measureText(k).width,I),0)),y=0,i){case G.RIGHT:y+=n;break;case G.CENTER:y+=n/2;break}return v.width=n,h.font=d,v.height=T,h.fillStyle=`rgb(${r.background.join(" ")})`,h.fillRect(0,0,v.width,v.height),h.fillStyle=`rgb(${r.foreground.join(" ")})`,h.textBaseline="top",h.font=d,h.canvas.style.letterSpacing=`${a}px`,h.textAlign={[W.LEFT]:"left",[W.CENTER]:"center",[W.RIGHT]:"right"}[Number(i)],h.translate(0,f[0]),x.forEach((I,k)=>{h.fillText(I,y,k*S*o-(o-S*o)/2)}),v.remove(),v};function zt(e,t,n,r,o,i,s=[]){if(i=i||0,i<=0)return[t];for(let a=1;a<=t.length;a++){const l=t.substr(0,a);if(e.measureText(l).width>i)return s.push(t.substr(0,a-1)),s=s.concat(zt(e,t.substr(a-1),n,r+o,o,i)),s}return s.push(t),s}var he={cutLine:{display:()=>({title:"Cut Line"})},grid:{display:e=>({title:"Grid",value:`Columns: ${e.data.length}`}),beforePrinterCommand:async(e,t=!0)=>{const{widths:n,data:r,options:o,imageOptions:i}=e.value,s=(i==null?void 0:i.width)||U,{columnGutter:a,rowGutter:l}=g({columnGutter:12,rowGutter:12},o);let c=n.filter(d=>d<1).reduce((d,v)=>d+(1-v),0);c/=n.filter(d=>d===1).length;const p=await Promise.all(r.map(async(d,v)=>{const h=r.length-1;return await Promise.all(d.filter(({visible:S})=>S).map(async S=>{let x=parseInt(s/r.length)*n[v];n[v]===1&&(x+=parseInt(s/r.length)*c),h>0&&(x=x-a*h/r.length);const{value:T}=S;(T.imageOptions=T.imageOptions||{}).width=x;try{return await he[String(S.type)].beforePrinterCommand(g({},S),!1)}catch(I){return he.text.beforePrinterCommand(new Oe({visible:!0,value:K(g({},Xe()),{text:I.message,imageOptions:T.imageOptions})}),!1)}}))})),w=p.reduce((d,v)=>{const h=v.length-1;return Math.max(v.filter(({visible:S})=>S).reduce((S,{value:x})=>S+x.height,h*l),d)},1);let f=new OffscreenCanvas(s,w);const y=f.getContext("2d");let u=0;return p.forEach((d,v)=>{let h=0;u+=d.filter(({visible:x})=>x).reduce((x,{value:T},I)=>(y.drawImage(T,u,h),h+=T.height+(I<d.length?l:0),Math.max(T.width,x)),0)+(v<p.length?a:0)}),f=Y(f,i),e.value=t?await J(f):f,e}},barcode:{display:e=>({title:"Barcode",value:`${e.text.slice(0,16)}\u2026`}),beforePrinterCommand:async(e,t=!0)=>{const{text:n,options:r,imageOptions:o}=e.value;let i=await kr(n||"empty",r||{});return i=Y(i,o),e.value=t?await J(i):i,e}},qrCode:{display:e=>({title:"QR Code",value:`${e.text.slice(0,16)}\u2026`}),beforePrinterCommand:async(e,t=!0)=>{const{text:n,options:r,imageOptions:o}=e.value,i=g({},r);i.width=r.width||o.width;let s=await $r(n||"empty",i);return s=Y(s,o),e.value=t?await J(s):s,e}},image:{display:()=>({title:"Image"}),beforePrinterCommand:async(e,t=!0)=>{const{file:n,imageOptions:r}=e.value;let o=await Wo(n);return o=Y(o,r),e.value=t?await J(o):o,e}},spacer:{display:()=>({title:"Spacer"}),beforePrinterCommand:async(e,t=!0)=>{const{value:n,imageOptions:r}=e.value;let o=new OffscreenCanvas((r==null?void 0:r.width)||U,Math.max(n,1));return o=Y(o,r),e.value=t?await J(o):o,e}},text:{display:e=>({title:"Text",value:`${e.text.slice(0,16)}\u2026`}),beforePrinterCommand:async(e,t=!0)=>{const{text:n,options:r,imageOptions:o}=e.value;let i=await Vt(n||"empty",r||{},(o==null?void 0:o.rotate)?null:(o==null?void 0:o.width)||U);return i=Y(i,o),e.value=t?await J(i):i,e}},table:{display:e=>{var t;return{title:"Table",value:`Rows: ${e.data.length}; Columns: ${(t=e.data[0])==null?void 0:t.length}; `}},beforePrinterCommand:async(e,t=!0)=>{const{data:n,columns:r,options:o,imageOptions:i}=e.value,s=(i==null?void 0:i.width)||U,a=(i==null?void 0:i.width)||U;try{const{columnGutter:l,rowGutter:c}=g({columnGutter:12,rowGutter:12},o);let p=n;if(p.length<1)throw new Error("Table empty!");const w=r.length,f=a/w-(w-1)*l/w;let y=r.filter(({width:x})=>x<1).reduce((x,{width:T})=>x+(1-T),0);y/=r.filter(({width:x})=>x===1).length;const u=[];p=await Promise.all(p.map((x,T)=>Promise.all(Array(r.length).fill({}).map(async(I,k)=>{I=x[k];let D;o.useColumnStyles?(D=r[k].bodyOptions||{},o.headActive&&T<1?D=r[k].headOptions:o.footActive&&p.length-1===T&&(D=r[k].footOptions)):(D=o.bodyOptions||{},o.headActive&&T<1?D=o.headOptions:o.footActive&&p.length-1===T&&(D=o.footOptions));let H=parseInt(f*r[k].width);return r[k].width===1&&(H+=parseInt(s/r.length*y)),I=await Vt(String(I===void 0?"":I),D,H),u[T]=Math.max(I.height,u[T]||0),I}))));const d=u.reduce((x,T)=>x+T,0)+(p.length-1)*c;let v=0,h=new OffscreenCanvas((i==null?void 0:i.width)||U,d);const S=h.getContext("2d");return r.forEach((x,T)=>{let I=0;v+=p.reduce((D,H,ce)=>{const ve=H[T];return S.drawImage(ve,v,I),I+=u[ce]+(ce<p.length?c:0),Math.max(ve.width,D)},0)+(T<r.length?l:0)}),h=Y(h,i),e.value=t?await J(h):h,e}catch(l){return await he.text.beforePrinterCommand(new Oe({visible:!0,value:K(g({},K(g({},Xe()),{options:K(g({},R),{align:G.CENTER,weight:700,underline:!0})})),{text:l.message})}),t)}}},nativeText:{display:e=>({title:"Native Text",value:`${e.slice(0,16)}\u2026`})},feedPitch:{display:({type:e,value:t})=>({title:"Feed-Pitch",value:`${e} | ${t}`})},reset:{display:e=>({property:!0,title:"Reset"})},setAlign:{display:e=>({property:!0,title:"Align",value:`${Object.entries(G).find(t=>t[1]===e)[0]}`})},setFont:{display:e=>({property:!0,title:"Font",value:Object.entries($).find(t=>Number(e)===t[1])[0]})},setLineSpace:{display:e=>({property:!0,title:"Line-Space",value:e})},setWordGap:{display:e=>({property:!0,title:"Word-Gap",value:e})},setMargin:{display:e=>({property:!0,title:"Margin",value:e})},setDensity:{display:e=>({property:!0,title:"Density",value:e})}};class Zo extends an{constructor(){super();this.socket=null,this.connected=!1}async connect(t=3e3,n="localhost",r=!1){const o=r?"wss":"ws";this.io=await this.ready();const i=this.io(`${o}://${n}:${t}`,{autoConnect:!1,reconnection:!1,secure:r,transports:["websocket"]});this.socket=await new Promise((s,a)=>{i.on("error",l=>{this.emit("error",l)}),i.on("connect_error",l=>{this.emit("error",l),a(l)}),i.on("connect",()=>{this.connected=i.connected,this.emit("connect"),s(i)}),i.on("disconnect",()=>{this.disconnect(),this.emit("disconnect")}),i.connect()})}async ready(){if(this.io)return this.io;const{io:t}=await O(()=>import("./index.c05fa7e4.js"),[]);return this.io=t,t}get host(){var t,n,r;return(r=(n=(t=this.socket)==null?void 0:t.io)==null?void 0:n.opts)==null?void 0:r.hostname}get port(){var t,n,r,o,i,s;return((r=(n=(t=this.socket)==null?void 0:t.io)==null?void 0:n.opts)==null?void 0:r.port)&&Number((s=(i=(o=this.socket)==null?void 0:o.io)==null?void 0:i.opts)==null?void 0:s.port)||void 0}get secure(){var t,n,r;return(r=(n=(t=this.socket)==null?void 0:t.io)==null?void 0:n.opts)==null?void 0:r.secure}promiseEmit(t,n){return new Promise(r=>{this.socket.emit(t,n,r)})}disconnect(){var t;(t=this.socket)==null||t.destroy(),this.socket=null,this.connected=!1}async getInfo(){const t=await this.promiseEmit("getInfo");return console.log("getInfo",t),t}async executeActions(t){t=await Promise.all(t.filter(({visible:r})=>r).map(async r=>"beforePrinterCommand"in he[r.type]?await he[r.type].beforePrinterCommand(Object.assign({},r)):r));const n=await this.promiseEmit("executeActions",t);console.log("executeActions",n)}}const Ye=F.observable(new Zo);Jn(Ye);Ye.on("error",e=>{jt.add(e)});Object.defineProperty(F.prototype,"$client",{get(){return Ye}});class Uo{constructor(){this.prompts=[]}prompt(t,n){return new Promise(r=>{const o={title:n,message:t},i=s=>{this.prompts.slice(this.prompts.indexOf(o),1),r(s)};o.callback=i,this.prompts.push(o)})}}const Yo=F.observable(new Uo);Object.defineProperty(F.prototype,"$dialog",{get(){return Yo}});F.component("App",Nt);new F({render:e=>e(Nt)}).$mount("#app");export{he as A,ro as B,R as C,Ro as D,Br as E,ri as F,$e as G,Gr as H,Wo as I,Bo as J,pi as K,Y as L,ti as M,ui as N,fe as O,$ as P,O as _,ai as a,Oe as b,li as c,si as d,ci as e,pe as f,Fr as g,ke as h,Lo as i,fi as j,ei as k,Ae as l,G as m,B as n,re as o,hi as p,di as q,zr as r,qn as s,Mr as t,Vr as u,Hr as v,Xe as w,ni as x,ie as y,W as z};
