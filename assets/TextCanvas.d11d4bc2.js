import{d as o,n as d,b as r,j as c,p as u,m as h}from"./index.d9e5b60e.js";import{c as p}from"./Printer.406cba78.js";import"./vendor.b1428349.js";import"./devterm.9c60640a.js";import"./buffer.89012e65.js";import"./View.376899ee.js";import"./TextButton.350da12d.js";import"./DropDown.cb7d7234.js";import"./Dialog.d6ff428b.js";var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas")},m=[];const v={props:{colors:{type:Object,default(){return{printer:{preview:{foreground:[255,0,0]}}}}},value:{type:Object,default(){return p()}},width:{type:Number,default:384},options:{type:Object,default(){return{}}}},data(){return{ctx:null}},computed:{align(){return{[r.LEFT]:"left",[r.CENTER]:"center",[r.RIGHT]:"right"}[this.options.align]},font(){return c[Number(this.options.font)]}},watch:{value(){this.render()}},mounted(){this.$el.width=this.width,this.ctx=this.$el.getContext("2d"),this.render()},methods:{getColor(t=1){return`rgb(${this.colors.printer.preview.foreground.join(" ")} / ${t*100}%)`},render(){window.cancelAnimationFrame(this.animationFrame),this.animationFrame=window.requestAnimationFrame(async()=>{const t=this.ctx;let e=await f(this.value);e=u(e,{background:this.colors.printer.preview.background,foreground:this.colors.printer.preview.foreground},.6+.4*(this.options.density/h)),t.canvas.width=this.width,t.canvas.height=e.height;const n=this.width,a=parseInt(this.options.margin*n);let i=0;switch(this.options.align){case r.RIGHT:i+=this.width-e.width;break;case r.CENTER:i+=(this.width-e.width)/2;break;default:i+=a;break}t.drawImage(e,i,0),this.$emit("ready")})}}},f=async t=>(await o.text.beforePrinterCommand({value:t},!1)).value,s={};var _=d(v,l,m,!1,w,"4e1e3d10",null,null);function w(t){for(let e in s)this[e]=s[e]}var N=function(){return _.exports}();export{N as default,f as render};
