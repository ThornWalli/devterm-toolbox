var u=Object.defineProperty,l=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var o=(t,e,i)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,s=(t,e)=>{for(var i in e||(e={}))v.call(e,i)&&o(t,i,e[i]);if(a)for(var i of a(e))_.call(e,i)&&o(t,i,e[i]);return t},d=(t,e)=>l(t,m(e));import{n as f,A as r,q as w,u as g,p as b,b as x,v as j}from"./index.7038c8c8.js";import{b as T}from"./Printer.74a50cdd.js";import"./vendor.b1428349.js";import"./devterm.9c60640a.js";import"./buffer.89012e65.js";import"./View.bd73328a.js";import"./TextButton.71b3af21.js";import"./TextField.9ad316f2.js";import"./Dialog.063dd66c.js";import"./FileSelect.a4c316f5.js";import"./CheckBox.2eceb8ea.js";var C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas")},F=[];const y={props:{colors:{type:Object,default(){return{printer:{preview:{foreground:[255,0,0]}}}}},value:{type:Object,default(){return T()}},width:{type:Number,default:384},options:{type:Object,default(){return{}}}},data(){return{ctx:null}},computed:{align(){return{[r.LEFT]:"left",[r.CENTER]:"center",[r.RIGHT]:"right"}[this.options.align]},font(){return w[Number(this.options.font)]}},watch:{value(){this.render()}},mounted(){this.$el.width=this.width,this.ctx=this.$el.getContext("2d"),this.render()},methods:{getColor(t=1){return`rgb(${this.colors.printer.preview.foreground.join(" ")} / ${t*100}%)`},render(){window.cancelAnimationFrame(this.animationFrame),this.animationFrame=window.requestAnimationFrame(()=>{const t=this.ctx,e=g(this.value.text,d(s({},this.value.options),{margin:this.options.margin}),(this.value.imageOptions||{}).rotate?(this.value.imageOptions||{}).width:this.width);let i=b(e,s({},this.value.imageOptions));i=x(i,{background:this.colors.printer.preview.background,foreground:this.colors.printer.preview.foreground},.6+.4*(this.options.density/j)),t.canvas.width=this.width,t.canvas.height=i.height;const c=this.width,p=parseInt(this.options.margin*c);let n=0;switch(this.options.align){case r.RIGHT:n+=this.width-i.width;break;case r.CENTER:n+=(this.width-i.width)/2;break;default:n+=p;break}t.drawImage(i,n,0),this.$emit("ready")})}}},h={};var O=f(y,C,F,!1,E,"cb39be06",null,null);function E(t){for(let e in h)this[e]=h[e]}var B=function(){return O.exports}();export{B as default};
