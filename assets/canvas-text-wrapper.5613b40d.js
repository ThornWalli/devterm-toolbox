import{c as k}from"./buffer.4460b8ba.js";var $={exports:{}};(function(B){(function(L){function C(s,u,I){var D={font:"18px Arial, sans-serif",sizeToFill:!1,maxFontSizeToFill:!1,lineHeight:1,allowNewLine:!0,lineBreak:"auto",textAlign:"left",verticalAlign:"top",justifyLines:!1,paddingX:0,paddingY:0,fitParent:!1,strokeText:!1,renderHDPI:!0,textDecoration:"none"},e={};for(var f in D)e[f]=I.hasOwnProperty(f)?I[f]:D[f];var a=s.getContext("2d");a.font=e.font,a.textBaseline="bottom";var p=1,F=typeof k!="undefined"?k.devicePixelRatio:L.devicePixelRatio;if(e.renderHDPI&&F>1){var b={};for(var f in a)b[f]=a[f];var X=s.width,z=s.height;p=F,s.width=X*p,s.height=z*p,s.style.width=X*p*.5+"px",s.style.height=z*p*.5+"px";for(var f in b)try{a[f]=b[f]}catch{}a.scale(p,p)}var P=(e.fitParent?s.parentNode.clientWidth:s.width)/p,A=(e.fitParent?s.parentNode.clientHeight:s.height)/p,x=P-e.paddingX*2,_=A-e.paddingY*2,m=e.font.match(/\d+(px|em|%)/g)?+e.font.match(/\d+(px|em|%)/g)[0].match(/\d+/g):18,w=0,n=[],H=[],l={x:0,y:0},d=0,T,S="\u200B";u=M(u),O(m),G(),Z(),R();function M(r){do r=r.replace(/\n\n/g,`
`+S+`
`);while(r.indexOf(`

`)>-1);return r}function O(r){T||(T=e.sizeToFill?a.font.split(/\b\d+px\b/i):e.font.split(/\b\d+px\b/i)),a.font=T[0]+r+"px"+T[1]}function G(){isNaN(e.lineHeight)?e.lineHeight.toString().indexOf("px")!==-1?d=parseInt(e.lineHeight):e.lineHeight.toString().indexOf("%")!==-1&&(d=parseInt(e.lineHeight)/100*m):d=m*e.lineHeight}function R(){if(e.sizeToFill){var r=u.trim().split(/\s+/).length,t=0,o=e.maxFontSizeToFill!==!1;do if(o)if(++t<=e.maxFontSizeToFill)E(t);else break;else E(++t);while(w<_&&n.join(" ").split(/\s+/).length==r);E(--t)}else W();e.justifyLines&&e.lineBreak==="auto"&&q(),U(),Q(),K()}function E(r){O(r),d=r,W()}function W(){if(e.allowNewLine)for(var r=u.trim().split(`
`),t=0,o=0;t<r.length-1;t++)o+=r[t].trim().split(/\s+/).length,H.push(o);var i=u.trim().split(/\s+/);j(i),V(i),w=n.length*d}function j(r){var t,o,i,c;r.forEach(function(h,y){if(t="",o=a.measureText(h).width,o>x){for(var g=0;a.measureText(t+h[g]).width<=x&&g<h.length;g++)t+=h[g];i=h.slice(0,g),c=h.slice(g),r.splice(y,1,i,c)}})}function V(r){n=[];for(var t=0,o=0;t<r.length;o++)if(n[o]="",e.lineBreak==="auto"){if(a.measureText(n[o]+r[t]).width>x)break;for(;a.measureText(n[o]+r[t]).width<=x&&t<r.length;)if(n[o]+=r[t]+" ",t++,e.allowNewLine){for(var i=0;i<H.length;i++)if(H[i]===t){o++,n[o]="";break}}n[o]=n[o].trim()}else n[o]=r[t],t++}function q(){for(var r,t,o,i=0;i<n.length;i++)o=a.measureText(n[i]).width,(!r||o>r)&&(r=o,t=i);var c,h,y,g,N,v="\u200A";for(i=0;i<n.length;i++)if(i!==t&&(c=n[i].trim().split(/\s+/).length,!(c<=1))){n[i]=n[i].trim().split(/\s+/).join(v),h=a.measureText(v).width,y=(r-a.measureText(n[i]).width)/h,g=y/(c-1),N="";for(var Y=0;Y<g;Y++)N+=v;n[i]=n[i].trim().split(v).join(N)}}function J(r,t,o){var i=a.measureText(r).width;switch(a.textAlign){case"center":t-=i/2;break;case"right":t-=i;break}a.beginPath(),a.moveTo(t,o),a.lineTo(t+i,o),a.stroke()}function K(){for(var r=S+" ",t=0;t<n.length;t++)l.y=parseInt(l.y)+d,n[t]!==r&&(a.fillText(n[t],l.x,l.y),e.strokeText&&a.strokeText(n[t],l.x,l.y),e.textDecoration.toLocaleLowerCase()==="underline"&&J(n[t],l.x,l.y))}function Q(){a.textAlign=e.textAlign,e.textAlign=="center"?l.x=P/2:e.textAlign=="right"?l.x=P-e.paddingX:l.x=e.paddingX}function U(){e.verticalAlign=="middle"?l.y=(A-w)/2:e.verticalAlign=="bottom"?l.y=A-w-e.paddingY:l.y=e.paddingY}function Z(){if(typeof u!="string")throw new TypeError("The second parameter must be a String.");if(isNaN(m))throw new TypeError('Cannot parse "font".');if(isNaN(d))throw new TypeError('Cannot parse "lineHeight".');if(e.textAlign.toLocaleLowerCase()!=="left"&&e.textAlign.toLocaleLowerCase()!=="center"&&e.textAlign.toLocaleLowerCase()!=="right")throw new TypeError('Property "textAlign" must be set to either "left", "center", or "right".');if(e.verticalAlign.toLocaleLowerCase()!=="top"&&e.verticalAlign.toLocaleLowerCase()!=="middle"&&e.verticalAlign.toLocaleLowerCase()!=="bottom")throw new TypeError('Property "verticalAlign" must be set to either "top", "middle", or "bottom".');if(typeof e.justifyLines!="boolean")throw new TypeError('Property "justifyLines" must be a Boolean.');if(isNaN(e.paddingX))throw new TypeError('Property "paddingX" must be a Number.');if(isNaN(e.paddingY))throw new TypeError('Property "paddingY" must be a Number.');if(typeof e.fitParent!="boolean")throw new TypeError('Property "fitParent" must be a Boolean.');if(e.lineBreak.toLocaleLowerCase()!=="auto"&&e.lineBreak.toLocaleLowerCase()!=="word")throw new TypeError('Property "lineBreak" must be set to either "auto" or "word".');if(typeof e.sizeToFill!="boolean")throw new TypeError('Property "sizeToFill" must be a Boolean.');if(typeof e.strokeText!="boolean")throw new TypeError('Property "strokeText" must be a Boolean.');if(typeof e.renderHDPI!="boolean")throw new TypeError('Property "renderHDPI" must be a Boolean.');if(e.textDecoration.toLocaleLowerCase()!=="none"&&e.textDecoration.toLocaleLowerCase()!=="underline")throw new TypeError('Property "textDecoration" must be set to either "none" or "underline".')}return n}"module"in L&&"exports"in B?B.exports=C:L.CanvasTextWrapper=C})(k)})($);export{$ as c};
