var w=Object.defineProperty,I=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var v=(t,n,e)=>n in t?w(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,c=(t,n)=>{for(var e in n||(n={}))$.call(n,e)&&v(t,e,n[e]);if(_)for(var e of _(n))S.call(n,e)&&v(t,e,n[e]);return t},l=(t,n)=>I(t,b(n));import{A as D}from"./View.44587490.js";import{n as a,B as p,_ as r,g as x,d as C,a as k,f as T,c as E,A as O,k as M,e as j}from"./index.bab9ee53.js";import{I as d}from"./TextButton.7f1048d8.js";import{I as V}from"./DropDown.a9412aaf.js";import{A as P,M as L,f as R}from"./Dialog.ec3343da.js";var B=function(){var t,n=this,e=n.$createElement,i=n._self._c||e;return i("base-generic-button",n._g({staticClass:"input-icon-button",class:(t={},t["color-"+n.color]=n.color,t)},n.$listeners),[i("i",[n._t("default",function(){return[n.svg?i(n.svg,{tag:"component"}):n._e()]})],2)])},N=[];const z={components:{BaseGenericButton:p},inheritAttrs:!1,props:{color:{type:String,default:"secondary"},svg:{type:[Object,Function],required:!1,default:null}}},h={};var F=a(z,B,N,!1,H,"66b006f0",null,null);function H(t){for(let n in h)this[n]=h[n]}var f=function(){return F.exports}(),u={barcode:()=>r(()=>import("./Barcode.6fd327c8.js"),["assets/Barcode.6fd327c8.js","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/Content.054782c3.js","assets/Content.1ab9f320.css","assets/CheckBox.dc1b9740.js","assets/CheckBox.12afbd75.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css","assets/TextBox.fa61379b.js","assets/TextBox.4f745cbd.css","assets/ImageOptions.69aade66.js"]),qrCode:()=>r(()=>import("./QrCode.f0b3dcd0.js"),["assets/QrCode.f0b3dcd0.js","assets/QrCode.879a4742.css","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/Content.054782c3.js","assets/Content.1ab9f320.css","assets/CheckBox.dc1b9740.js","assets/CheckBox.12afbd75.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css","assets/TextBox.fa61379b.js","assets/TextBox.4f745cbd.css","assets/ImageOptions.69aade66.js"]),grid:()=>r(()=>import("./Grid.5c4b98da.js"),["assets/Grid.5c4b98da.js","assets/Grid.f94650f3.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/Content.054782c3.js","assets/Content.1ab9f320.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css","assets/ImageOptions.69aade66.js","assets/CheckBox.dc1b9740.js","assets/CheckBox.12afbd75.css","assets/View.44587490.js"]),spacer:()=>r(()=>import("./Spacer.4f8aefe4.js"),["assets/Spacer.4f8aefe4.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css"]),text:()=>r(()=>import("./Text.48ee75b3.js"),["assets/Text.48ee75b3.js","assets/Text.613f602b.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/Content.054782c3.js","assets/Content.1ab9f320.css","assets/TextBox.fa61379b.js","assets/TextBox.4f745cbd.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css","assets/ImageOptions.69aade66.js","assets/CheckBox.dc1b9740.js","assets/CheckBox.12afbd75.css"]),nativeText:()=>r(()=>import("./NativeText.636caed9.js"),["assets/NativeText.636caed9.js","assets/NativeText.801a7451.css","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/TextBox.fa61379b.js","assets/TextBox.4f745cbd.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css"]),image:()=>r(()=>import("./Image.4d8fc7e4.js"),["assets/Image.4d8fc7e4.js","assets/Image.0a7576d4.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/FileSelect.2497cc4f.js","assets/FileSelect.aa36643f.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css","assets/ImageOptions.69aade66.js","assets/CheckBox.dc1b9740.js","assets/CheckBox.12afbd75.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css"]),feedPitch:()=>r(()=>import("./FeedPitch.5c8652e7.js"),["assets/FeedPitch.5c8652e7.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css"]),setAlign:()=>r(()=>import("./SetAlign.5a87c5f2.js"),["assets/SetAlign.5a87c5f2.js","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css"]),setFont:()=>r(()=>import("./SetFont.3fd87868.js"),["assets/SetFont.3fd87868.js","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css"]),setLineSpace:()=>r(()=>import("./SetLineSpace.d3cbab7b.js"),["assets/SetLineSpace.d3cbab7b.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css"]),setWordGap:()=>r(()=>import("./SetWordGap.5bc9cefa.js"),["assets/SetWordGap.5bc9cefa.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css"]),setMargin:()=>r(()=>import("./SetMargin.8877d5ff.js"),["assets/SetMargin.8877d5ff.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/TextField.0ac45ea9.js","assets/TextField.8c427f2c.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css"]),setDensity:()=>r(()=>import("./SetDensity.2a5416ce.js"),["assets/SetDensity.2a5416ce.js","assets/ActionDialog.8e7971ac.js","assets/TextButton.7f1048d8.js","assets/TextButton.0a2406b2.css","assets/index.bab9ee53.js","assets/index.4c06a71d.css","assets/vendor.b1428349.js","assets/devterm.9c60640a.js","assets/buffer.89012e65.js","assets/Dialog.ec3343da.js","assets/Dialog.30fbfc42.css","assets/DropDown.a9412aaf.js","assets/DropDown.4b7d9790.css"])},G=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M22 16v-2h-2v-2h-2v-2h-2V8h-2V6h-4v2H8v2H6v2H4v2H2v2H0v2h24v-2z"}})])},q={render:G},U=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M22 8v2h-2v2h-2v2h-2v2h-2v2h-4v-2H8v-2H6v-2H4v-2H2V8H0V6h24v2z"}})])},J={render:U},W=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M2.1 4.9L9.2 12l-7.1 7.1 2.8 2.8 7.1-7.1 7.1 7.1 2.8-2.8-7.1-7.1 7.1-7.1-2.8-2.8L12 9.2 4.9 2.1z"}})])},Q={render:W},K=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M2 6h16v16H2z"}}),e("path",{attrs:{d:"M22 18H6V2h16v16zM8 16h12V4H8v12z"}})])},X={render:K},Y=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12 6c5.4 0 10 2.7 10 6s-4.6 6-10 6-10-2.7-10-6 4.6-6 10-6m0-2C5.4 4 0 7.6 0 12s5.4 8 12 8 12-3.6 12-8-5.4-8-12-8z"}}),e("circle",{attrs:{cx:"12",cy:"12",r:"4"}})])},Z={render:Y},tt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M10 2h4v20h-4z"}}),e("path",{attrs:{d:"M2 10h20v4H2z"}})])},et={render:tt},nt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M2 23c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l20-20c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-20 20c-.2.2-.4.3-.7.3zM13 8.1c-.3 0-.6-.1-1-.1-2.2 0-4 1.8-4 4 0 .4.1.7.1 1L13 8.1zm-2 7.8c.3.1.7.1 1 .1 2.2 0 4-1.8 4-4 0-.4-.1-.7-.1-1L11 15.9z"}}),e("path",{attrs:{d:"M3.5 17.7L5 16.2c-1.8-1.1-3-2.6-3-4.2 0-3.3 4.6-6 10-6 1 0 2 .1 2.9.3l1.7-1.7c-1.4-.4-3-.6-4.6-.6C5.4 4 0 7.6 0 12c0 2.2 1.3 4.2 3.5 5.7zm17-11.4L19 7.8c1.8 1.1 3 2.6 3 4.2 0 3.3-4.6 6-10 6-1 0-2-.1-2.9-.3l-1.7 1.7c1.4.4 3 .6 4.6.6 6.6 0 12-3.6 12-8 0-2.2-1.3-4.2-3.5-5.7z"}})])},it={render:nt},st=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",t._g({staticClass:"controls-action-item",class:{focus:t.focus||t.selected,property:t.property,"can-select":t.canSelect},attrs:{focusable:""}},t.$listeners),[e("base-generic-button",{staticClass:"title",on:{click:t.onClick}},[e("span",[t._v(t._s(t.display.title)+t._s(t.display.value?":":""))]),t._v(" "),t.display.value?e("span",[t._v(t._s(t.display.value))]):t._e()]),t.$slots.default?e("div",[t._t("default")],2):t._e()],1)},ot=[];const rt={components:{BaseGenericButton:p},props:{itemStates:{type:Object,default(){return{id:!1}}},canSelect:{type:Boolean,default:!1},id:{type:String,default:"id"},focus:{type:Boolean,default:!1},property:{type:Boolean,default:!1},display:{type:Object,default(){return{title:"Action Item",value:"Action Item Value"}}}},computed:{selected(){return this.itemStates[this.id]}},methods:{onClick(){this.canSelect&&this.$emit("select",this.id)}}},m={};var ct=a(rt,st,ot,!1,at,"683e90c7",null,null);function at(t){for(let n in m)this[n]=m[n]}var lt=function(){return ct.exports}(),dt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("app-dialog",t._g(t._b({ref:"dialog",staticClass:"dialog-action-select",attrs:{"escape-close":!0,title:"Actions"},scopedSlots:t._u([{key:"default",fn:function(){return t._l(t.groupedActions,function(i,s){return e("fieldset",{key:s},[e("legend",[t._v(t._s(s))]),e("ul",t._l(i,function(o){return e("li",{key:o.title},[e("input-text-button",{attrs:{color:"primary"},on:{click:function(Ct){return t.onClick(o.value)}}},[t._v(" "+t._s(o.title)+" ")])],1)}),0)])})},proxy:!0},{key:"buttons",fn:function(){return[e("input-text-button",{attrs:{type:"button",color:"primary",text:"Close"},on:{click:function(i){return t.close("close")}}})]},proxy:!0}])},"app-dialog",t.$attrs,!1),t.$listeners))},ut=[];const _t={components:{AppDialog:P,InputTextButton:d},mixins:[L],inheritAttrs:!1,props:{native:{type:Boolean,default:!1}},computed:{groupedActions(){return x().filter(t=>this.native&&t.native||!t.native).reduce((t,n)=>((t[n.group]||(t[n.group]=[])).push(n),t),{})}},methods:{onClick(t){this.$emit("select",t),this.close()}}},g={};var vt=a(_t,dt,ut,!1,pt,"f89038bc",null,null);function pt(t){for(let n in g)this[n]=g[n]}var ht=function(){return vt.exports}(),ft=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"actions",class:{"action-active":t.selectedAction,drag:t.isDrag}},[e("div",{ref:"list",staticClass:"list"},[e("div",{on:{dragover:t.allowDrop,drop:t.onDrop}},[e("transition-group",{attrs:{name:t.isDrag?null:"flip-list",tag:"ul"}},t._l(t.model,function(i,s){return e("li",{key:i.id,attrs:{id:"anchor-action-item-"+i.id}},[t.ACTION_DEFINITIONS[i.type]?e("action-item",{attrs:{id:i.id,property:t.ACTION_DEFINITIONS[i.type].property,display:t.ACTION_DEFINITIONS[i.type].display(i.value),"can-select":!!t.ACTION_DIALOGS[i.type],"item-states":t.itemStates,"data-id":i.id,draggable:!t.itemStates[i.id],focus:t.dragTargetId===i.id&&i.id!==t.dragId},on:{select:function(o){return t.onSelectAction(i.id)},dragstart:t.onDragStart},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"action-controls"},[e("span",{staticClass:"index"},[t._v(t._s(s+1))]),e("input-icon-button",{on:{click:function(o){return t.onClickActionUp(s)}}},[e("svg-icon-arrow-up")],1),e("input-icon-button",{on:{click:function(o){return t.onClickActionDown(s)}}},[e("svg-icon-arrow-down")],1),e("input-icon-button",{on:{click:function(o){return t.onClickActionAdd(s)}}},[e("svg-icon-add")],1),e("input-icon-button",{on:{click:function(o){return t.onClickActionDuplicate(s)}}},[e("svg-icon-duplicate")],1),e("input-icon-button",{on:{click:function(o){return t.onClickActionVisible(s)}}},[i.visible?e("svg-icon-visible"):e("svg-icon-invisible")],1),e("input-icon-button",{on:{click:function(o){return t.onClickActionDelete(s)}}},[e("svg-icon-remove")],1)],1)]},proxy:!0}],null,!0)}):e("span",[t._v(" Action "+t._s(i.type)+" not defined\u2026 ")])],1)}),0)],1)]),e("div",{staticClass:"add-action"},[e("input-text-button",{attrs:{color:"primary"},on:{click:function(i){return t.onClickActionAdd()}}},[t._v(" Add Action ")])],1),t.selectedAction?e(t.dialogComponent,{ref:"dialog",tag:"component",attrs:{embed:t.embed,colors:t.colors,value:t.selectedAction.value},on:{input:function(i){return t.updateAction(t.selectedAction,i)},ready:t.onReadyDialog,close:t.onCloseDialog}}):t._e(),e("dialog-action-select",{ref:"dialogActionSelect",attrs:{native:t.nativeActions,embed:t.embed},on:{select:t.onSelectAddAction}})],1)},mt=[];const gt={components:{SvgIconArrowUp:q,SvgIconArrowDown:J,SvgIconRemove:Q,SvgIconDuplicate:X,SvgIconAdd:et,SvgIconVisible:Z,SvgIconInvisible:it,InputIconButton:f,InputTextButton:d,ActionItem:lt,DialogActionSelect:ht},props:{embed:{type:Boolean,default:!1},nativeActions:{type:Boolean,default:!0},value:{type:Array,default(){return[]}},colors:{type:Object,default(){return{}}}},data(){return{ACTION_DEFINITIONS:C,ACTION_DIALOGS:u,selectedActionId:null,actionTypeOptions:k(),itemStates:{},isDrag:!1,dragId:null,dragTargetId:null,model:[...this.value],addIndex:void 0}},computed:{selectedAction(){return this.model.find(t=>t.id===this.selectedActionId)},dialogComponent(){return this.selectedAction&&u[this.selectedAction.type]}},watch:{value(t){this.model=[...t]},model:{handler(t){this.itemStates=Object.fromEntries(t.map(({id:n})=>[n,!1]))},immediate:!0},selectedAction(t,n){const e=c({},this.itemStates);n&&(e[n.id]=!1),t&&(e[t.id]=!0),this.itemStates=e,this.$emit("selectAction",t)}},mounted(){this.subscriptions=[T(window,"dragenter").subscribe(t=>{if(t.target.closest("li [data-id]")){const n=t.target.closest("li [data-id]");this.dragTargetId=n.dataset.id}})]},destroyed(){this.subscriptions.forEach(t=>t.unsubscribe())},methods:{onSelectAddAction(t){if(t){const n=E(t);Number.isInteger(this.addIndex)?this.updateModel([].concat(this.model.slice(0,this.addIndex+1),n,this.model.slice(this.addIndex+1))):this.updateModel([].concat(this.model,n)),this.addIndex=void 0,this.$nextTick(()=>{this.selectedActionId=null;const e=this.$refs.list.querySelector(`#anchor-action-item-${n.id}`);e&&e.scrollIntoView({block:"center"}),!!u[n.type]&&window.setTimeout(()=>{this.selectedActionId=n.id},100)})}},showActionSelectDialog(){return this.$refs.dialogActionSelect.show()},onReadyDialog(){this.$nextTick(()=>{this.$refs.dialog.show()})},onCloseDialog(){this.selectedActionId=null},onSelectAction(t){t?this.selectedActionId=t:this.selectedActionId=null},updateModel(t){this.model=[...t],this.$emit("input",[...t])},updateAction(t,n){const e=this.model,i=e.indexOf(t);e[i]=l(c({},e[i]),{value:n}),this.updateModel(e)},onClickActionAdd(t){this.addIndex=t,this.showActionSelectDialog()},onClickActionDelete(t){const n=[].concat(this.model);this.updateModel([...n.slice(0,t||0),...n.slice(t+1)])},onClickActionUp(t){const n=[].concat(this.model),e=n[Math.max(t-1,0)];n[Math.max(t-1,0)]=n[t],n[t]=e,this.updateModel(n)},onClickActionDown(t){const n=[].concat(this.model),e=this.model[Math.min(t+1,n.length-1)];n[Math.min(t+1,n.length-1)]=n[t],n[t]=e,this.updateModel(n)},onClickActionVisible(t){const n=this.model[t],e=this.model;e[t]=l(c({},e[t]),{visible:!n.visible}),this.updateModel(e)},onDragStart(t){window.setTimeout(()=>{this.dragId=t.target.dataset.id,this.isDrag=!0},100)},onDrop(t){let n=[].concat(this.model);const e=n.indexOf(n.find(o=>o.id===this.dragTargetId)),i=n.indexOf(n.find(o=>o.id===this.dragId)),s=n.splice(i,1);i>e?n=[...n.slice(0,e+1),...s,...n.slice(e+1)]:n=[...n.slice(0,e),...s,...n.slice(e)],this.dragId=null,this.dragTargetId=null,this.isDrag=!1,this.updateModel(n)},allowDrop(t){t.preventDefault()},onClickActionDuplicate(t){const n=new O(l(c({},JSON.parse(JSON.stringify(this.model[t]))),{id:null}));this.updateModel([].concat(this.model.slice(0,t+1),n,this.model.slice(t+1)))}}},A={};var At=a(gt,ft,mt,!1,yt,"4c613b12",null,null);function yt(t){for(let n in A)this[n]=A[n]}var wt=function(){return At.exports}(),It=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("app-view",{staticClass:"view-printer",style:t.style},[e("div",{key:JSON.stringify(t.colors),staticClass:"printer-preview"},[e("div",{staticClass:"scroll",class:{loading:t.loading}},[e("div",{class:{"has-selected":t.selectedAction}},t._l(t.previewItems,function(i){return e("div",{key:i.id,class:{selected:t.selectedAction&&t.selectedAction.id===i.id},attrs:{id:"anchor-action-"+i.id}},[e(i.component,t._b({key:i.id,tag:"component",attrs:{options:i.options,colors:t.colors},on:{ready:function(s){return i.resolve()}}},"component",i.props,!1))],1)}),0)]),e("div",{staticClass:"buttons"},[e("input-text-button",{staticClass:"print-button",attrs:{color:"primary"},on:{click:t.onClickPrint}},[t._v(" Print ")])],1),e("transition",{attrs:{name:"fade"}},[t.loading?e("div",{staticClass:"layer-loading"},[t._v(" Loading ")]):t._e()])],1),e("actions",{staticClass:"printer-actions",attrs:{embed:"",colors:t.colors},on:{selectAction:function(i){t.selectedAction=i}},model:{value:t.actions,callback:function(i){t.actions=i},expression:"actions"}}),t.actions.length<1?e("div",{staticClass:"actions-empty"},[t._v(" Add a Action! ")]):t._e()],1)},bt=[];const $t={components:{AppView:D,InputIconButton:f,InputTextButton:d,InputDropDown:V,Actions:wt},props:{colors:{type:Object,default(){return{primary:[255,204,0],secondary:[0,0,0],printer:{preview:{background:[0,0,0],foreground:[255,204,0]}}}}},value:{type:Array,default(){return[]}}},data(){return{actions:[].concat(this.value),previewItems:[],loading:!0,selectedAction:null}},computed:{style(){return{"--color-printer-preview-background":`rgb(${this.colors.printer.preview.background.join(",")})`,"--color-printer-preview-foreground":`rgb(${this.colors.printer.preview.foreground.join(",")})`}}},watch:{value(t){this.actions=t},actions(){this.render(),this.$emit("input",this.actions)},selectedAction(t){t&&this.scrollToAction(t)}},mounted(){this.render(),this.subscriptions=[M.pipe(R(({key:t})=>t==="PrintScreen")).subscribe(()=>this.print())]},destroyed(){this.subscriptions.forEach(t=>t.unsubscribe())},methods:{render(){this.actions.length?(this.loading=!0,window.clearTimeout(this.renderTimeout),this.renderTimeout=window.setTimeout(async()=>{const t=[];this.previewItems=await j(this.actions).map(n=>(t.push(new Promise(e=>{n.resolve=()=>e()})),n)),await Promise.all(t),this.$nextTick(()=>{this.loading=!1,this.selectedAction&&this.scrollToAction(this.selectedAction)})},500)):this.previewItems=[]},print(){return this.$client.executeActions(this.actions)},scrollToAction(t){this.$nextTick(()=>{window.requestAnimationFrame(()=>{const n=document.querySelector(`#anchor-action-${t.id}`);n&&n.scrollIntoView({block:"center"})})})},onClickPrint(){this.print()}}},y={};var St=a($t,It,bt,!1,Dt,"2065e18e",null,null);function Dt(t){for(let n in y)this[n]=y[n]}var xt=function(){return St.exports}(),Vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xt});export{wt as A,Vt as P};
