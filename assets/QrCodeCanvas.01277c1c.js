import{A as i,n as c,w as l,r as d,M as h,p as a}from"./index.ae9fd7ab.js";import u from"./NativeText.8109fc6d.js";import"./vendor.b1428349.js";import"./devterm.9e5b33a4.js";import"./buffer.4460b8ba.js";var p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.error?r("preview-native-text",{attrs:{value:e.error.message,colors:e.colors,options:e.options}}):r("canvas",{ref:"canvas"})],1)},v=[];const w={components:{PreviewNativeText:u},props:{colors:{type:Object,default(){return{base:[255,0,0]}}},value:{type:Object,default(){return l()}},width:{type:Number,default:384},options:{type:Object,default(){return{}}}},data(){return{error:null,ctx:null}},watch:{async value(){await this.render()}},async mounted(){await this.render()},methods:{getColor(e=1){return`rgb(${this.colors.printer.preview.foreground.join(" ")} / ${e*100}%)`},render(){this.error=null,this.$nextTick(()=>{const e=this.$refs.canvas.getContext("2d");window.requestAnimationFrame(async()=>{try{const t=await _(this.value);d(t,{background:this.colors.printer.preview.background,foreground:this.colors.printer.preview.foreground},.6+.4*(this.options.density/h)),e.canvas.width=this.width,e.canvas.height=t.height,e.fillStyle=`rgb(${this.colors.printer.preview.background.join(" ")})`,e.fillRect(0,0,e.canvas.width,e.canvas.height);const r=this.width,s=parseInt(this.options.margin*r);let n=0;switch(this.options.align){case a.RIGHT:n+=this.width-t.width;break;case a.CENTER:n+=(this.width-t.width)/2;break;default:n+=s;break}e.drawImage(t,n,0)}catch(t){throw this.error=t,t}this.$emit("ready")})})}}},_=async e=>(await i.qrCode.beforePrinterCommand({value:e},!1)).value,o={};var m=c(w,p,v,!1,f,"b45c26bc",null,null);function f(e){for(let t in o)this[t]=o[t]}var I=function(){return m.exports}();export{I as default,_ as render};
