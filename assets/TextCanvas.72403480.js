import{A as h,h as m}from"./devterm.94c2d908.js";import{n as _,F as v}from"./index.26493afd.js";import"./vendor.b1428349.js";var g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas")},w=[];const x={props:{colors:{type:Object,default(){return{printer:{preview:{foreground:[255,0,0]}}}}},value:{type:String,default:"abcdef"},width:{type:Number,default:384},options:{type:Object,default(){return{}}}},data(){return{ctx:null}},computed:{align(){return{[h.LEFT]:"left",[h.CENTER]:"center",[h.RIGHT]:"right"}[this.options.align]},font(){return v[Number(this.options.font)]}},watch:{value(){this.render()}},mounted(){this.$el.width=this.width,this.ctx=this.$el.getContext("2d"),this.render()},methods:{getColor(t){return`rgb(${this.colors.printer.preview.foreground.join(" ")} / ${t*100}%)`},render(){window.cancelAnimationFrame(this.animationFrame),this.animationFrame=window.requestAnimationFrame(()=>{const t=this.ctx,e=this.value,i=[0,this.width*this.options.margin,0,0],r=this.font.fontSize,a=Math.max(this.options.lineSpace,r)/r,o=this.align;let n=this.width;this.$el.style.letterSpacing=`${this.options.wordGap}px`;let s=0;switch(o){case"right":s+=n,n-=i[1];break;case"center":s+=n/2,n-=i[1];break;default:s+=i[1],n-=i[1];break}t.font=`${r}px "${this.font.fontFamily}"`,t.textAlign=o;const l=e.split(`
`).map(c=>u(t,c,0,0,r,n)).flat(),p=[this.width,l.length*r];this.$el.width=p[0],this.$el.height=p[1]*a+i[0]+i[2],t.fillStyle=this.getColor(this.options.density/m),t.font=`${r}px "${this.font.fontFamily}"`,t.textBaseline="top",t.textAlign=o,t.translate(0,i[0]),l.forEach((c,f)=>t.fillText(c,s,f*a*r-(r-a*r)/2))})}}};function u(t,e,i,r,a,o,n=[]){if(o=o||0,o<=0)return[e];for(let s=1;s<=e.length;s++){const l=e.substr(0,s);if(t.measureText(l).width>o)return n.push(e.substr(0,s-1)),n=n.concat(u(t,e.substr(s-1),i,r+a,a,o)),n}return n.push(e),n}const d={};var b=_(x,g,w,!1,$,"58c2e057",null,null);function $(t){for(let e in d)this[e]=d[e]}var A=function(){return b.exports}();export{A as default};
