import{A as o,n as c,r as l,M as u,p as n}from"./index.bbfc5025.js";import d from"./NativeText.fc66f6b7.js";import"./vendor.b1428349.js";import"./devterm.9e5b33a4.js";import"./buffer.4460b8ba.js";var h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.error?r("preview-native-text",{attrs:{value:e.error.message,colors:e.colors,options:e.options}}):r("canvas",{ref:"canvas"})],1)},p=[];const v={components:{PreviewNativeText:d},props:{colors:{type:Object,default(){return{base:[255,0,0]}}},value:{type:Object,default(){return{file:null}}},width:{type:Number,default:384},options:{type:Object,default(){return{}}}},data(){return{error:null,ctx:null,img:null}},watch:{async value(){await this.render()}},async mounted(){await this.render()},methods:{getColor(e=1){return`rgb(${this.colors.printer.preview.foreground.join(" ")} / ${e*100}%)`},render(){this.error=null,this.$nextTick(()=>{window.requestAnimationFrame(async()=>{try{let e=await m(this.value);const t=this.$refs.canvas.getContext("2d");e=l(e,{background:this.colors.printer.preview.background,foreground:this.colors.printer.preview.foreground},.6+.4*(this.options.density/u)),t.canvas.width=this.width,t.canvas.height=e.height,t.fillStyle=`rgb(${this.colors.printer.preview.background.join(" ")})`,t.fillRect(0,0,t.canvas.width,t.canvas.height);const r=this.width,s=parseInt(this.options.margin*r);let a=0;switch(this.options.align){case n.RIGHT:a+=this.width-e.width;break;case n.CENTER:a+=(this.width-e.width)/2;break;default:a+=s;break}t.drawImage(e,a,0)}catch(e){this.error=e}this.$emit("ready")})})}}},m=async e=>(await o.image.beforePrinterCommand({value:e},!1)).value,i={};var _=c(v,h,p,!1,w,"46844ade",null,null);function w(e){for(let t in i)this[t]=i[t]}var I=function(){return _.exports}();export{I as default,m as render};
