var _=Object.defineProperty;var o=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var l=(t,n,e)=>n in t?_(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,r=(t,n)=>{for(var e in n||(n={}))m.call(n,e)&&l(t,e,n[e]);if(o)for(var e of o(n))b.call(n,e)&&l(t,e,n[e]);return t};import{n as a,i as g}from"./index.a368ccdb.js";import{B as y,a as x,I as S,D as c}from"./TextField.8dd3b75b.js";import{A as $,M as C}from"./Dialog.3e6e57b7.js";import{I as k}from"./TextButton.3d91a0e8.js";import{I as T}from"./FileSelect.2e073e96.js";import{I}from"./CheckBox.48ef8714.js";import"./vendor.b1428349.js";import"./devterm.a10f71a8.js";var P=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"base-tab-container",class:{"js--animate":t.dimension}},[t.tabs.length&&!t.hideSingleTab||t.tabs.length>1&&t.hideSingleTab?e("div",{staticClass:"tabs"},[e("ul",t._l(t.tabs,function(s,i){return e("li",{key:i},[e("label",[e("input",{attrs:{name:"tab-"+t._uid,type:"radio"},domProps:{value:s.name,checked:s.name===t.currentTab.name},on:{input:t.onInput}}),t._t("tab",function(){return[e("span",{class:{active:s.name===t.currentTab.name}},[t._v(t._s(s.title))])]},null,Object.assign({},s,{active:s.name===t.currentTab.name}))],2)])}),0)]):t._e(),e("div",{staticClass:"content"},[e("div",{ref:"content",style:t.contentStyle,on:{transitionend:t.onTransitionEnd}},[e("transition",{attrs:{name:t.transitionName,mode:t.transitionMode},on:{enter:t.enter}},[e("div",{key:t.currentTab.name},[t._l(t.visibleTabs,function(s){return t._t(s.name,null,null,{active:s.name===t.currentTab.name})})],2)])],1)])])},w=[];const D=["tab"],j={props:{transitionName:{type:String,default:null},transitionMode:{type:String,default:"out-in"},hideSingleTab:{type:Boolean,default:!1}},data(){return{selectedTab:null,dimension:null}},computed:{currentTab(){return this.selectedTab||this.tabs[0]},tabs(){return Object.keys(this.slots).filter(t=>!D.includes(t)).map(t=>{const n=this.$scopedSlots[String(t)]()[0];return{name:t,title:u(n,"title"),disabled:u(n,"disabled")}}).filter(t=>t).filter(t=>!t.disabled)},visibleTabs(){return this.tabs.filter(t=>t.name===this.currentTab.name)},contentStyle(){return this.dimension?{height:`${this.dimension.height}px`}:null},slots(){return this.$scopedSlots}},methods:{onInput(t){this.dimension=this.$refs.content.children[0].getBoundingClientRect(),this.selectedTab=this.tabs.find(n=>t.target.value===n.name)},onTransitionEnd(t){t.propertyName==="height"&&(this.dimension=null)},enter(){const{width:t,height:n}=this.$refs.content.children[0].getBoundingClientRect();this.dimension.width===t&&this.dimension.height===n?this.dimension=null:this.dimension={width:t,height:n}}}},u=(t,n)=>t.componentOptions?t.componentOptions.propsData[String(n)]:t.data&&t.data.attrs?t.data.attrs[String(n)]:null,p={};var O=a(j,P,w,!1,B,"5d33e06e",null,null);function B(t){for(let n in p)this[n]=p[n]}var N=function(){return O.exports}(),F=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{key:t.title,staticClass:"base-tab-container-content"},[t._t("default")],2)},R=[];const E={props:{title:{type:String,required:!0},disabled:{type:Boolean,default:!1}}},d={};var L=a(E,F,R,!1,M,"21e8efe2",null,null);function M(t){for(let n in d)this[n]=d[n]}var A=function(){return L.exports}(),z=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("app-dialog",t._g(t._b({ref:"dialog",staticClass:"dialog-server",attrs:{title:"Server",form:""},on:{submit:t.onSubmit},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"profile-select"},[e("input-drop-down",{attrs:{"baseline-label":"",label:"Profile",options:t.profileOptions},model:{value:t.selectedProfile,callback:function(s){t.selectedProfile=s},expression:"selectedProfile"}}),e("input-text-button",{attrs:{color:"primary",disabled:!t.selectedProfile,text:"Delete"},on:{click:t.onClickDeleteProfile}})],1),e("input-text-field",{attrs:{label:"Profile Name"},model:{value:t.profileName,callback:function(s){t.profileName=s},expression:"profileName"}}),e("hr"),e("base-tab-container",{staticClass:"tab-container",scopedSlots:t._u([{key:"general",fn:function(s){return[e("base-tab-container-content",t._b({attrs:{title:"General"}},"base-tab-container-content",s,!1),[e("div",{staticClass:"cols"},[e("div",[e("base-input-label",{attrs:{text:"Status"}},[e("span",{staticClass:"status",class:{active:t.active}},[t._v(t._s(t.active?"listening on *:"+t.$server.options.port:"Offline"))])])],1),e("div",[e("base-input-label",{attrs:{text:"Active Sessions"}},[e("span",[t._v(t._s(t.$server.options.activeSessions))])])],1)]),e("input-drop-down",{attrs:{"baseline-label":"",size:"5",label:"For SSL, select valid host",options:t.hostsOptions},model:{value:t.host,callback:function(i){t.host=i},expression:"host"}}),e("input-text-field",{attrs:{type:"Number",label:"Port",min:"1024",step:"1",value:t.port},on:{input:function(i){t.port=parseInt(i)}}}),t.active?t._e():e("input-check-box",{attrs:{label:"Auto connect"},model:{value:t.autoConnect,callback:function(i){t.autoConnect=i},expression:"autoConnect"}})],1)]}},{key:"ssl",fn:function(s){return[e("base-tab-container-content",t._b({attrs:{title:"SSL"}},"base-tab-container-content",s,!1),[e("input-file-select",{attrs:{label:"Key",accept:[".key",".pem"],value:t.ssl.key},on:{input:function(i){t.ssl.key=i?i.path:null}}}),e("input-file-select",{attrs:{label:"Cert",accept:[".cert",".crt",".pem"],value:t.ssl.cert},on:{input:function(i){t.ssl.cert=i?i.path:null}}}),e("input-file-select",{attrs:{label:"PFX",accept:[".pfx"],value:t.ssl.pfx},on:{input:function(i){t.ssl.pfx=i?i.path:null}}}),e("input-text-field",{attrs:{placeholder:"Passphrase",label:"Passphrase"},model:{value:t.ssl.passphrase,callback:function(i){t.$set(t.ssl,"passphrase",i)},expression:"ssl.passphrase"}})],1)]}}])})]},proxy:!0},{key:"buttons",fn:function(){return[t.active?e("input-text-button",{attrs:{color:"primary",text:"Stop"},on:{click:t.onClickStop}}):e("input-text-button",{attrs:{type:"submit",color:"primary",text:"Start"}}),e("input-text-button",{attrs:{color:"secondary",text:"Close"},on:{click:function(s){return t.close()}}})]},proxy:!0}])},"app-dialog",t.$attrs,!1),t.$listeners))},G=[];const q={components:{AppDialog:$,BaseInputLabel:y,BaseTabContainer:N,BaseTabContainerContent:A,InputTextButton:k,InputTextField:x,InputDropDown:S,InputCheckBox:I,InputFileSelect:T},mixins:[C],inheritAttrs:!1,data(){return{host:null,port:3e3,refreshIntervalDuration:3e3,refreshInterval:null,autoConnect:!0,ssl:{key:null,cert:null,pfx:null,passphrase:null},selectedProfile:this.$config.get("profile"),profileName:g}},computed:{active(){return this.$server.options.active},profileOptions(){return[{title:"Select Profile\u2026",value:""},...this.$config.get("profiles")].map(t=>new c(t.name||t))},hostsOptions(){return this.$server.options.hosts.map(t=>new c(t))}},watch:{selectedProfile:{handler(t,n){if(t&&t!==n){const{name:e,port:s,host:i,ssl:h}=this.$config.get("profiles").find(({name:v})=>v===t);this.profileName=e,this.port=s,this.host=i,this.ssl=r({},h)}},immediate:!0},open(t){this.toggleRefreshInterval(t)}},destroy(){this.toggleRefreshInterval(!1)},methods:{toggleRefreshInterval(t){t?(this.$server.refresh(),this.refreshInterval=window.setInterval(()=>{this.$server.refresh()},this.refreshIntervalDuration)):window.clearInterval(this.refreshInterval)},async onSubmit(t){t.preventDefault();try{await this.$server.start(this.port,this.ssl);const n=Object.values(this.ssl).find(Boolean);return this.autoConnect&&await this.$client.connect(this.port,this.host||this.$server.options.hosts[0],n),await this.$config.saveProfile({name:this.profileName,port:this.port,host:this.host,secure:n,ssl:r({},this.ssl)}),this.close({profile:this.profileName})}catch(n){this.$errorList.add(n)}},async onClickStop(){try{await this.$server.stop()}catch(t){this.$errorList.add(t)}},async onClickDeleteProfile(){await this.$config.deleteProfile(this.selectedProfile),this.selectedProfile=null}}},f={};var K=a(q,z,G,!1,U,"91354bea",null,null);function U(t){for(let n in f)this[n]=f[n]}var et=function(){return K.exports}();export{et as default};
