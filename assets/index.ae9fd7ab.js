var Jt=Object.defineProperty,Qt=Object.defineProperties;var Kt=Object.getOwnPropertyDescriptors;var Je=Object.getOwnPropertySymbols;var er=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable;var Qe=(e,t,r)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))er.call(t,r)&&Qe(e,r,t[r]);if(Je)for(var r of Je(t))tr.call(t,r)&&Qe(e,r,t[r]);return e},Q=(e,t)=>Qt(e,Kt(t));var Ke=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var V=(e,t,r)=>(Ke(e,t,"read from private field"),r?r.call(e):t.get(e)),ye=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},_e=(e,t,r,n)=>(Ke(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{V as N}from"./vendor.b1428349.js";import{f as rr,J as nr,b as or,a as ir,E as sr}from"./devterm.9e5b33a4.js";import{b as gt}from"./buffer.4460b8ba.js";const ar=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};ar();const lr="modulepreload",et={},cr="/",O=function(t,r){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=`${cr}${n}`,n in et)return;et[n]=!0;const o=n.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":lr,o||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),o)return new Promise((a,l)=>{s.addEventListener("load",a),s.addEventListener("error",l)})})).then(()=>t())};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ge=function(e,t){return Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Ge(e,t)};function de(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ge(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function ur(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(p){try{c(n.next(p))}catch(w){s(w)}}function l(p){try{c(n.throw(p))}catch(w){s(w)}}function c(p){p.done?i(p.value):o(p.value).then(a,l)}c((n=n.apply(e,t||[])).next())})}function yt(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(p){return l([c,p])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(p){c=[6,p],o=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ne(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function oe(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function ue(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function ee(e){return this instanceof ee?(this.v=e,this):new ee(e)}function fr(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){n[f]&&(o[f]=function(y){return new Promise(function(u,d){i.push([f,y,u,d])>1||a(f,y)})})}function a(f,y){try{l(n[f](y))}catch(u){w(i[0][3],u)}}function l(f){f.value instanceof ee?Promise.resolve(f.value.v).then(c,p):w(i[0][2],f)}function c(f){a("next",f)}function p(f){a("throw",f)}function w(f,y){f(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function pr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ne=="function"?ne(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(a,l){s=e[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}function C(e){return typeof e=="function"}function _t(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Re=_t(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function He(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Ae=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}return e.prototype.unsubscribe=function(){var t,r,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=ne(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else s.remove(this);var p=this.initialTeardown;if(C(p))try{p()}catch(d){i=d instanceof Re?d.errors:[d]}var w=this._teardowns;if(w){this._teardowns=null;try{for(var f=ne(w),y=f.next();!y.done;y=f.next()){var u=y.value;try{tt(u)}catch(d){i=i!=null?i:[],d instanceof Re?i=ue(ue([],oe(i)),oe(d.errors)):i.push(d)}}}catch(d){n={error:d}}finally{try{y&&!y.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}if(i)throw new Re(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)tt(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=(r=this._teardowns)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&He(r,t)},e.prototype.remove=function(t){var r=this._teardowns;r&&He(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),wt=Ae.EMPTY;function bt(e){return e instanceof Ae||e&&"closed"in e&&C(e.remove)&&C(e.add)&&C(e.unsubscribe)}function tt(e){C(e)?e():e.unsubscribe()}var Pe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ce={setTimeout:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ce.delegate;return((r==null?void 0:r.setTimeout)||setTimeout).apply(void 0,ue([],oe(e)))},clearTimeout:function(e){var t=Ce.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function xt(e){Ce.setTimeout(function(){throw e})}function rt(){}var dr=function(){return Be("C",void 0,void 0)}();function hr(e){return Be("E",void 0,e)}function vr(e){return Be("N",e,void 0)}function Be(e,t,r){return{kind:e,value:t,error:r}}var we=null;function Ie(e){if(Pe.useDeprecatedSynchronousErrorHandling){var t=!we;if(t&&(we={errorThrown:!1,error:null}),e(),t){var r=we,n=r.errorThrown,o=r.error;if(we=null,n)throw o}}else e()}var We=function(e){de(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,bt(r)&&r.add(n)):n.destination=_r,n}return t.create=function(r,n,o){return new Oe(r,n,o)},t.prototype.next=function(r){this.isStopped?Fe(vr(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?Fe(hr(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?Fe(dr,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Ae),mr=Function.prototype.bind;function De(e,t){return mr.call(e,t)}var gr=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){be(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){be(n)}else be(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){be(r)}},e}(),Oe=function(e){de(t,e);function t(r,n,o){var i=e.call(this)||this,s;if(C(r)||!r)s={next:r!=null?r:void 0,error:n!=null?n:void 0,complete:o!=null?o:void 0};else{var a;i&&Pe.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return i.unsubscribe()},s={next:r.next&&De(r.next,a),error:r.error&&De(r.error,a),complete:r.complete&&De(r.complete,a)}):s=r}return i.destination=new gr(s),i}return t}(We);function be(e){xt(e)}function yr(e){throw e}function Fe(e,t){var r=Pe.onStoppedNotification;r&&Ce.setTimeout(function(){return r(e,t)})}var _r={closed:!0,next:rt,error:yr,complete:rt},Xe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function wr(e){return e}function br(e){return e.length===0?wr:e.length===1?e[0]:function(r){return e.reduce(function(n,o){return o(n)},r)}}var P=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var o=this,i=Sr(t)?t:new Oe(t,r,n);return Ie(function(){var s=o,a=s.operator,l=s.source;i.add(a?a.call(i,l):l?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=nt(r),new r(function(o,i){var s=new Oe({next:function(a){try{t(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[Xe]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return br(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=nt(t),new t(function(n,o){var i;r.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},e.create=function(t){return new e(t)},e}();function nt(e){var t;return(t=e!=null?e:Pe.Promise)!==null&&t!==void 0?t:Promise}function xr(e){return e&&C(e.next)&&C(e.error)&&C(e.complete)}function Sr(e){return e&&e instanceof We||xr(e)&&bt(e)}function Er(e){return C(e==null?void 0:e.lift)}function ie(e){return function(t){if(Er(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(e,t,r,n,o){return new Tr(e,t,r,n,o)}var Tr=function(e){de(t,e);function t(r,n,o,i,s,a){var l=e.call(this,r)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(p){r.error(p)}}:e.prototype._next,l._error=i?function(c){try{i(c)}catch(p){r.error(p)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=o?function(){try{o()}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(We),Ir=_t(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),St=function(e){de(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new ot(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new Ir},t.prototype.next=function(r){var n=this;Ie(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){var s=n.observers.slice();try{for(var a=ne(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.next(r)}}catch(p){o={error:p}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var n=this;Ie(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var o=n.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;Ie(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,o=n.hasError,i=n.isStopped,s=n.observers;return o||i?wt:(s.push(r),new Ae(function(){return He(s,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,o=n.hasError,i=n.thrownError,s=n.isStopped;o?r.error(i):s&&r.complete()},t.prototype.asObservable=function(){var r=new P;return r.source=this,r},t.create=function(r,n){return new ot(r,n)},t}(P),ot=function(e){de(t,e);function t(r,n){var o=e.call(this)||this;return o.destination=r,o.source=n,o}return t.prototype.next=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,r)},t.prototype.error=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&o!==void 0?o:wt},t}(St),Cr=new P(function(e){return e.complete()}),Ue=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Et(e){return C(e==null?void 0:e.then)}function Tt(e){return C(e[Xe])}function It(e){return Symbol.asyncIterator&&C(e==null?void 0:e[Symbol.asyncIterator])}function Ct(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Or(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ot=Or();function kt(e){return C(e==null?void 0:e[Ot])}function $t(e){return fr(this,arguments,function(){var r,n,o,i;return yt(this,function(s){switch(s.label){case 0:r=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,ee(r.read())];case 3:return n=s.sent(),o=n.value,i=n.done,i?[4,ee(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,ee(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function At(e){return C(e==null?void 0:e.getReader)}function se(e){if(e instanceof P)return e;if(e!=null){if(Tt(e))return kr(e);if(Ue(e))return $r(e);if(Et(e))return Ar(e);if(It(e))return Pt(e);if(kt(e))return Pr(e);if(At(e))return Lr(e)}throw Ct(e)}function kr(e){return new P(function(t){var r=e[Xe]();if(C(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $r(e){return new P(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function Ar(e){return new P(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,xt)})}function Pr(e){return new P(function(t){var r,n;try{for(var o=ne(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function Pt(e){return new P(function(t){Rr(e,t).catch(function(r){return t.error(r)})})}function Lr(e){return Pt($t(e))}function Rr(e,t){var r,n,o,i;return ur(this,void 0,void 0,function(){var s,a;return yt(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=pr(e),l.label=1;case 1:return[4,r.next()];case 2:if(n=l.sent(),!!n.done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),o={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function B(e,t,r,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}function Lt(e,t){return t===void 0&&(t=0),ie(function(r,n){r.subscribe(fe(n,function(o){return B(n,e,function(){return n.next(o)},t)},function(){return B(n,e,function(){return n.complete()},t)},function(o){return B(n,e,function(){return n.error(o)},t)}))})}function Rt(e,t){return t===void 0&&(t=0),ie(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function Dr(e,t){return se(e).pipe(Rt(t),Lt(t))}function Fr(e,t){return se(e).pipe(Rt(t),Lt(t))}function Nr(e,t){return new P(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function Mr(e,t){return new P(function(r){var n;return B(r,t,function(){n=e[Ot](),B(r,t,function(){var o,i,s;try{o=n.next(),i=o.value,s=o.done}catch(a){r.error(a);return}s?r.complete():r.next(i)},0,!0)}),function(){return C(n==null?void 0:n.return)&&n.return()}})}function Dt(e,t){if(!e)throw new Error("Iterable cannot be null");return new P(function(r){B(r,t,function(){var n=e[Symbol.asyncIterator]();B(r,t,function(){n.next().then(function(o){o.done?r.complete():r.next(o.value)})},0,!0)})})}function jr(e,t){return Dt($t(e),t)}function Gr(e,t){if(e!=null){if(Tt(e))return Dr(e,t);if(Ue(e))return Nr(e,t);if(Et(e))return Fr(e,t);if(It(e))return Dt(e,t);if(kt(e))return Mr(e,t);if(At(e))return jr(e,t)}throw Ct(e)}function Hr(e,t){return t?Gr(e,t):se(e)}function Ft(e,t){return ie(function(r,n){var o=0;r.subscribe(fe(n,function(i){n.next(e.call(t,i,o++))}))})}var Vr=Array.isArray;function zr(e,t){return Vr(t)?e.apply(void 0,ue([],oe(t))):e(t)}function Br(e){return Ft(function(t){return zr(e,t)})}function Wr(e,t,r,n,o,i,s,a){var l=[],c=0,p=0,w=!1,f=function(){w&&!l.length&&!c&&t.complete()},y=function(d){return c<n?u(d):l.push(d)},u=function(d){i&&t.next(d),c++;var v=!1;se(r(d,p++)).subscribe(fe(t,function(h){o==null||o(h),i?y(h):t.next(h)},function(){v=!0},void 0,function(){if(v)try{c--;for(var h=function(){var S=l.shift();s?B(t,s,function(){return u(S)}):u(S)};l.length&&c<n;)h();f()}catch(S){t.error(S)}}))};return e.subscribe(fe(t,y,function(){w=!0,f()})),function(){a==null||a()}}function Nt(e,t,r){return r===void 0&&(r=1/0),C(t)?Nt(function(n,o){return Ft(function(i,s){return t(n,i,o,s)})(se(e(n,o)))},r):(typeof t=="number"&&(r=t),ie(function(n,o){return Wr(n,o,e,r)}))}var Xr=["addListener","removeListener"],Ur=["addEventListener","removeEventListener"],Zr=["on","off"];function pe(e,t,r,n){if(C(r)&&(n=r,r=void 0),n)return pe(e,t,r).pipe(Br(n));var o=oe(Jr(e)?Ur.map(function(a){return function(l){return e[a](t,l,r)}}):Yr(e)?Xr.map(it(e,t)):qr(e)?Zr.map(it(e,t)):[],2),i=o[0],s=o[1];if(!i&&Ue(e))return Nt(function(a){return pe(a,t,r)})(se(e));if(!i)throw new TypeError("Invalid event target");return new P(function(a){var l=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return a.next(1<c.length?c:c[0])};return i(l),function(){return s(l)}})}function it(e,t){return function(r){return function(n){return e[r](t,n)}}}function Yr(e){return C(e.addListener)&&C(e.removeListener)}function qr(e){return C(e.on)&&C(e.off)}function Jr(e){return C(e.addEventListener)&&C(e.removeEventListener)}function Qr(e){return e<=0?function(){return Cr}:ie(function(t,r){var n=0;t.subscribe(fe(r,function(o){++n<=e&&(r.next(o),e<=n&&r.complete())}))})}function Ze(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new St}:t,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,s=i===void 0?!0:i,a=e.resetOnRefCountZero,l=a===void 0?!0:a;return function(c){var p=null,w=null,f=null,y=0,u=!1,d=!1,v=function(){w==null||w.unsubscribe(),w=null},h=function(){v(),p=f=null,u=d=!1},S=function(){var x=p;h(),x==null||x.unsubscribe()};return ie(function(x,T){y++,!d&&!u&&v();var I=f=f!=null?f:r();T.add(function(){y--,y===0&&!d&&!u&&(w=Ne(S,l))}),I.subscribe(T),p||(p=new Oe({next:function(k){return I.next(k)},error:function(k){d=!0,v(),w=Ne(h,o,k),I.error(k)},complete:function(){u=!0,v(),w=Ne(h,s),I.complete()}}),Hr(x).subscribe(p))})(c)}}function Ne(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return t===!0?(e(),null):t===!1?null:t.apply(void 0,ue([],oe(r))).pipe(Qr(1)).subscribe(function(){return e()})}pe(window,"resize").pipe(Ze({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1}));pe(window,"keypress").pipe(Ze({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1}));const oi=pe(window,"keyup").pipe(Ze({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1})),Kr=e=>new Promise(t=>{const r=document.createElement("input");r.type="file",r.accept=(e||[]).join(","),r.click(),r.addEventListener("change",n=>{const o=(n.dataTransfer||n.target).files;r.remove(),t(o)})}),en=e=>{R()&&(e.on("connect",()=>{window.electron.ipcRenderer.invoke("client","connect",!0)}),e.on("disconnect",()=>{window.electron.ipcRenderer.invoke("client","connect",!1)}))},tn=()=>{window.electron.ipcRenderer.invoke("window","minimize")},rn=()=>{window.electron.ipcRenderer.invoke("window","maximize")},nn=e=>{if(R())window.electron.ipcRenderer.invoke("window","fullscreen",e);else return e?document.body.requestFullscreen():document.exitFullscreen()},on=()=>{window.electron.ipcRenderer.invoke("close")},R=()=>"electron"in window,sn=e=>{if(R())return window.electron.ipcRenderer.invoke("save",e);{const t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","scene.json"),r.click()}},an=async()=>{if(R())return window.electron.ipcRenderer.invoke("load");{const e=await Kr(["application/json"]);return new Promise((t,r)=>{if(e.length){const n=new FileReader;n.addEventListener("load",()=>{try{t(JSON.parse(n.result))}catch(o){r(o)}}),n.readAsText(e[0])}else t()})}},ln=e=>{R()&&window.electron.ipcRendererReceive("dialog",e)},cn=e=>{R()?window.electron.ipcRendererReceive("window",(t,r)=>{switch(t){case"fullscreen":e(r);break}}):window.addEventListener("fullscreenchange",()=>{e(document.fullscreenEnabled)})},un=()=>R()?window.electron.ipcRenderer.invoke("loadConfig"):JSON.parse(window.localStorage.getItem("config")),fn=e=>R()?window.electron.ipcRenderer.invoke("saveConfig",e):window.localStorage.setItem("config",JSON.stringify(e)),pn=()=>R()?window.electron.ipcRenderer.invoke("getCurrentVersion"):"1.0.0-beta.44",dn=async()=>{const t=(()=>{const n=[],o=[!1,!0],i=[400,500,600,700,800,900];for(let s=0;s<o.length;s++)for(let a=0;a<i.length;a++)n.push({weight:i[a],italic:o[s]});return n})(),r=[{group:"DevTerm",value:'"5x7-ISO8859-1"',name:"5x7-ISO8859-1",variants:[]},{group:"DevTerm",value:'"6x12-ISO8859-1"',name:"6x12-ISO8859-1",variants:[]},{group:"DevTerm",value:'"7x14-ISO8859-1"',name:"7x14-ISO8859-1",variants:[]},{group:"DevTerm",value:'"Px437_CompaqThin_8x16"',name:"Px437_CompaqThin_8x16",variants:[]},{group:"Web",value:"sans-serif",name:"Sans-serif",monospace:!1,variants:t},{group:"Web",value:"serif",name:"Serif",monospace:!1,variants:t},{group:"Web",value:"monospace",name:"Monospace",monospace:!0,variants:t},{group:"Web",value:"fantasy",name:"Fantasy",monospace:!1,variants:t},{group:"Web",value:"cursive",name:"Cursive",monospace:!1,variants:t}];return R()?r.concat(await window.electron.ipcRenderer.invoke("getFonts")):[...r,{group:"System",value:'"Arial"',name:"Arial",monospace:!1,variants:t},{group:"System",value:'"Verdana"',name:"Verdana",monospace:!1,variants:t},{group:"System",value:'"Helvetica"',name:"Helvetica",monospace:!1,variants:t},{group:"System",value:'"Tahoma"',name:"Tahoma",monospace:!1,variants:t},{group:"System",value:'"Trebuchet MS"',name:"Trebuchet MS",monospace:!1,variants:t},{group:"System",value:'"Times New Roman"',name:"Times New Roman",monospace:!1,variants:t},{group:"System",value:'"Georgia"',name:"Georgia",monospace:!1,variants:t},{group:"System",value:'"Garamond"',name:"Garamond",monospace:!1,variants:t},{group:"System",value:'"Courier New"',name:"Courier New",monospace:!0,variants:t},{group:"System",value:'"Brush Script MT"',name:"Brush Script MT",monospace:!1,variants:t}]};var Mt=6,ii=16,q=384,$={SIZE_8_16_THIN_1:0,SIZE_8_16_THIN_2:4,SIZE_5_7:1,SIZE_6_12:2,SIZE_7_14:3},hn={[$.SIZE_5_7]:76,[$.SIZE_6_12]:63,[$.SIZE_7_14]:54,[$.SIZE_8_16_THIN_1]:47,[$.SIZE_8_16_THIN_2]:47},si={[$.SIZE_8_16_THIN_1]:[8,16],[$.SIZE_8_16_THIN_2]:[8,16],[$.SIZE_7_14]:[7,14],[$.SIZE_6_12]:[6,12],[$.SIZE_5_7]:[5,7]},G={LEFT:0,CENTER:1,RIGHT:2},jt=()=>({align:G.LEFT,font:$.SIZE_8_16_THIN_1,margin:0,underline:0,lineSpace:0,density:Mt,underLine:0,wordGap:0}),vn="/assets/5x7-ISO8859-1.1e468e9f.ttf",mn="/assets/6x12-ISO8859-1.4c4c24d1.ttf",gn="/assets/7x14-ISO8859-1.b8471bdd.ttf",yn="/assets/Px437_CompaqThin_8x16.ccffc04f.ttf";const _n=()=>{const e=[["5x7-ISO8859-1",`url(${vn})`],["6x12-ISO8859-1",`url(${mn})`],["7x14-ISO8859-1",`url(${gn})`],["Px437_CompaqThin_8x16",`url(${yn})`]];return Promise.all(e.map(async t=>{console.log("load font",t[0],t[1]);const r=new FontFace(...t);return await r.load(),document.fonts.add(r),r}))},ai={[$.SIZE_5_7]:{fontFamily:"5x7-ISO8859-1",fontSize:7},[$.SIZE_6_12]:{fontFamily:"6x12-ISO8859-1",fontSize:12},[$.SIZE_7_14]:{fontFamily:"7x14-ISO8859-1",fontSize:14},[$.SIZE_8_16_THIN_1]:{fontFamily:"Px437_CompaqThin_8x16",fontSize:16},[$.SIZE_8_16_THIN_2]:{fontFamily:"Px437_CompaqThin_8x16",fontSize:16}};var xe,wn=new Uint8Array(16);function bn(){if(!xe&&(xe=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!xe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xe(wn)}var xn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Sn(e){return typeof e=="string"&&xn.test(e)}var A=[];for(var Me=0;Me<256;++Me)A.push((Me+256).toString(16).substr(1));function En(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(A[e[t+0]]+A[e[t+1]]+A[e[t+2]]+A[e[t+3]]+"-"+A[e[t+4]]+A[e[t+5]]+"-"+A[e[t+6]]+A[e[t+7]]+"-"+A[e[t+8]]+A[e[t+9]]+"-"+A[e[t+10]]+A[e[t+11]]+A[e[t+12]]+A[e[t+13]]+A[e[t+14]]+A[e[t+15]]).toLowerCase();if(!Sn(r))throw TypeError("Stringified UUID is invalid");return r}function Tn(e,t,r){e=e||{};var n=e.random||(e.rng||bn)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return En(n)}class ke{constructor(t){const{id:r,type:n,value:o,visible:i}=t||{};this.id=r||Tn(),this.type=n,this.value=o,this.visible=i===void 0?!0:i}toJSON(){return{id:this.id,type:this.type,value:this.value,visible:this.visible}}}var In=384,{createCanvas:he,loadImage:li,Canvas:ci}=ir,ae=()=>({width:null,rotate:!1,flipX:!1,flipY:!1,invert:!1,grayscale:!1}),U=(e,t)=>(t=g(g({},ae()),t),t.rotate&&(e=An(e)),e=kn(e,t.width),(t.flipX||t.flipY)&&(e=$n(e,t.flipX,t.flipY)),t.invert&&(e=On(e)),t.grayscale&&(e=Pn(e)),e=Cn(e),e),Cn=e=>{const t=e.getContext("2d"),r=t.getImageData(0,0,t.canvas.width,t.canvas.height),n=r.data;for(let o=0;o<n.length;o+=4)n[o+3]===0&&(n[o]=255,n[o+1]=255,n[o+2]=255,n[o+3]=255);return t.putImageData(r,0,0),e},On=e=>{const t=e.getContext("2d"),r=t.getImageData(0,0,t.canvas.width,t.canvas.height),n=r.data;for(let o=0;o<n.length;o+=4)n[o]=255-n[o],n[o+1]=255-n[o+1],n[o+2]=255-n[o+2];return t.putImageData(r,0,0),e},kn=(e,t)=>{t=Math.min(e.width,Math.min(t||e.width,In));const r=t*(e.height/e.width),n=he(t,r);return n.getContext("2d").drawImage(e,0,0,t,r),n},$n=(e,t,r)=>{const n=he(e.width,e.height),o=n.getContext("2d");console.log(1-t*2,1-r*2);const i=1-t*2,s=1-r*2;return o.translate(t*e.width,r*e.height),o.scale(i,s),o.drawImage(e,0,0,e.width,e.height),n},An=e=>{let t=e.getContext("2d");const r=he(e.height,e.width);return t=r.getContext("2d"),t.translate(e.height,0),t.rotate(Math.PI/2),t.drawImage(e,0,0),r},Pn=e=>{const t=e.getContext("2d");return t.putImageData(rr(t.getImageData(0,0,e.width,e.height)),0,0),e},Ln=(e,t)=>{const r=he();try{return nr(r,e,t),r}catch(n){throw new Error(n)}};async function Rn(e,t={}){t=g({margin:0},t);const r=he(t.width||1,t.width||1);return new Promise(n=>{or.toCanvas(r,e,t,o=>{if(o)throw o;n(r)})})}var Dn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("select",{attrs:{required:e.required},on:{change:function(n){return e.$emit("input",n.target.value)}}},[e._l(e.singleOptions,function(n){return r("option",{key:n.value,domProps:{value:n.value,selected:n.value===e.preparedValue}},[e._v(" "+e._s(n.title)+" ")])}),e._l(e.groupedOptions,function(n){return r("optgroup",{key:n.label,attrs:{label:n.label}},e._l(n.options,function(o){return r("option",{key:o.value,domProps:{value:o.value,selected:o.value===e.preparedValue}},[e._v(" "+e._s(o.title)+" ")])}),0)})],2)},Fn=[];function W(e,t,r,n,o,i,s,a){var l=typeof e=="function"?e.options:e;t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId="data-v-"+i);var c;if(s?(c=function(f){f=f||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!f&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(f=__VUE_SSR_CONTEXT__),o&&o.call(this,f),f&&f._registeredComponents&&f._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(y,u){return c.call(u),p(y,u)}}else{var w=l.beforeCreate;l.beforeCreate=w?[].concat(w,c):[c]}return{exports:e,options:l}}const Nn={props:{options:{type:Array,default(){return[1,2,3,4]}},value:{type:[String,Number],default:null},required:{type:Boolean,default:!1}},computed:{preparedValue(){return this.value===null?"":String(this.value)},preparedOptions(){return this.options.map(e=>typeof e=="object"&&"title"in e?$e.create(e):$e.create({value:e}))},singleOptions(){return this.preparedOptions.filter(e=>!e.group)},groupedOptions(){return Object.entries(this.preparedOptions.reduce((e,t)=>(t.group&&(e[t.group]=(e[t.group]||[]).concat(t)),e),{})).map(([e,t])=>({label:e,options:t}))}}};var J,te,re;class $e{constructor(t){ye(this,J,void 0);ye(this,te,void 0);ye(this,re,void 0);t&&typeof t!="object"&&(t={value:t});const{value:r,title:n,group:o}=t||{value:""};_e(this,J,r||""),_e(this,te,n||V(this,J)),_e(this,re,o)}get value(){return V(this,J)}get title(){return V(this,te)}get group(){return V(this,re)}toJSON(){return{value:V(this,J),title:V(this,te),group:V(this,re)}}static create(...t){return new this(...t)}}J=new WeakMap,te=new WeakMap,re=new WeakMap;const st={};var Mn=W(Nn,Dn,Fn,!1,jn,null,null,null);function jn(e){for(let t in st)this[t]=st[t]}var ui=function(){return Mn.exports}();const Gn=()=>[{native:!0,title:"Align (native)",value:"setAlign",group:"Layout"},{native:!0,title:"Margin (native)",value:"setMargin",group:"Layout"},{native:!0,title:"Font (native)",value:"setFont",group:"Layout"},{native:!0,title:"LineSpace (native)",value:"setLineSpace",group:"Layout"},{native:!0,title:"WordGap (native)",value:"setWordGap",group:"Layout"},{native:!1,title:"Spacer",value:"spacer",group:"Layout"},{native:!1,title:"Grid",value:"grid",group:"Layout"},{native:!1,title:"Image",value:"image",group:"Content"},{native:!1,title:"QRCode",value:"qrCode",group:"Content"},{native:!1,title:"Barcode",value:"barcode",group:"Content"},{native:!1,title:"Text",value:"text",group:"Content"},{native:!1,title:"Table",value:"table",group:"Content"},{native:!0,title:"Text (native)",value:"nativeText",group:"Content"},{native:!0,title:"Reset (native)",value:"reset",group:"General"},{native:!0,title:"Feed Pitch (native)",value:"feedPitch",group:"General"},{native:!0,title:"Cutline (native)",value:"cutLine",group:"General"},{native:!0,title:"Density (native)",value:"setDensity",group:"General"}],fi=()=>[new $e({title:"Add new Action\u2026",value:""}),...Gn().map(e=>new $e(e))],pi=e=>{let t;switch(e){case"setLineSpace":t=0;break;case"setWordGap":t=0;break;case"setMargin":t=0;break;case"setDensity":t=1;break;case"setFont":t=$.SIZE_8_16_THIN_1;break;case"setAlign":t=G.LEFT;break;case"feedPitch":t={value:1,type:"font"};break;case"text":t=Ve();break;case"table":t=Zn();break;case"nativeText":t="Text";break;case"grid":t=zn();break;case"image":t=Bn();break;case"qrCode":t=Wn();break;case"barcode":t=Xn();break;case"spacer":t=Un();break}return new ke({type:e,value:t})},di=e=>{const t=jt();return e.filter(r=>r.visible).map(r=>Vn(r,t)).filter(Boolean)},Hn=e=>Array(hn[e]).fill("").map((t,r)=>r%2===0?"=":"-").join(""),Vn=(e,t)=>{switch(e.type){case"setMargin":t.margin=e.value;break;case"setAlign":t.align=e.value;break;case"setLineSpace":t.lineSpace=e.value;break;case"setWordGap":t.wordGap=e.value;break;case"setFont":t.font=Number(e.value);break;case"setDensity":t.density=Number(e.value);break;case"reset":Object.assign(t,jt());break;case"cutLine":return{id:e.id,component:()=>O(()=>import("./NativeText.8109fc6d.js"),["assets/NativeText.8109fc6d.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:Q(g({},t),{margin:0,wordGap:0,lineSpace:0,density:Mt}),props:{value:Hn(t.font)}};case"spacer":return{id:e.id,component:()=>O(()=>import("./SpacerCanvas.6e243bce.js"),["assets/SpacerCanvas.6e243bce.js","assets/SpacerCanvas.52030cc2.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"grid":return{id:e.id,component:()=>O(()=>import("./GridCanvas.7004f4d3.js"),["assets/GridCanvas.7004f4d3.js","assets/GridCanvas.b667bdd0.css","assets/NativeText.8109fc6d.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"barcode":return{id:e.id,component:()=>O(()=>import("./BarcodeCanvas.4583c2e1.js"),["assets/BarcodeCanvas.4583c2e1.js","assets/BarcodeCanvas.c3e7a34f.css","assets/NativeText.8109fc6d.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"qrCode":return{id:e.id,component:()=>O(()=>import("./QrCodeCanvas.01277c1c.js"),["assets/QrCodeCanvas.01277c1c.js","assets/QrCodeCanvas.61d59f7a.css","assets/NativeText.8109fc6d.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"image":return{id:e.id,component:()=>O(()=>import("./ImageCanvas.43e730fa.js"),["assets/ImageCanvas.43e730fa.js","assets/ImageCanvas.2ca62634.css","assets/NativeText.8109fc6d.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"text":return{id:e.id,component:()=>O(()=>import("./TextCanvas.5e9264b7.js"),["assets/TextCanvas.5e9264b7.js","assets/TextCanvas.09b213aa.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"table":return{id:e.id,component:()=>O(()=>import("./TableCanvas.e6c63c8c.js"),["assets/TableCanvas.e6c63c8c.js","assets/TableCanvas.17b16592.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"nativeText":return{id:e.id,component:()=>O(()=>import("./NativeText.8109fc6d.js"),["assets/NativeText.8109fc6d.js","assets/NativeText.1f1c7c51.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e)};case"feedPitch":return{id:e.id,component:()=>O(()=>import("./FeedPitch.2fe5e26f.js"),["assets/FeedPitch.2fe5e26f.js","assets/FeedPitch.3fa7fa3d.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),options:g({},t),props:g({},e.value)}}return null},zn=()=>({widths:[1],data:[[]],options:{columnGutter:0,rowGutter:0},imageOptions:ae()}),Ve=()=>({text:"Sample",options:L(),imageOptions:ae()}),Bn=()=>({file:null,imageOptions:ae()}),Wn=()=>({text:"Sample",options:{errorCorrectionLevel:"M",margin:0,scale:4,small:!1},imageOptions:ae()}),Xn=()=>({text:"Sample",options:{format:"",height:100,font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,margin:10,displayValue:!0,flat:!1},imageOptions:ae()}),Un=()=>({value:0}),z=Object.freeze({LEFT:"left",CENTER:"center",RIGHT:"right"}),L=()=>({fontSize:16,align:z.LEFT,lineSpace:0,wordGap:0,margin:0,fontFamily:"sans-serif",color:"#000",weight:400,italic:!1,underline:!1,justify:!1}),Zn=()=>({data:[[]],columns:[Se()],options:{columnGutter:0,rowGutter:0,headActive:!1,footActive:!1,useColumnStyles:!1,bodyOptions:Se(),headOptions:Se(),footOptions:Se()}}),Se=()=>({width:1,bodyOptions:L(),headOptions:L(),footOptions:L()});var Yn=[{type:"reset"},{id:"4374d709-ab96-4d35-84b9-b4f08f29e6de",type:"table",value:{data:[["test test test test test test test test test test test test test ",2,3],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],options:{columnGutter:0,rowGutter:0},headActive:!1,footActive:!1,columns:[{width:1,bodyOptions:{fontSize:16,align:z.LEFT,lineSpace:0,wordGap:0,margin:0,fontFamily:'"Arial"',color:"#000",weight:400,italic:!1,underline:!0},headOptions:L(),footOptions:L()},{width:1,bodyOptions:{fontSize:16,align:z.CENTER,lineSpace:0,wordGap:0,margin:0,fontFamily:'"Arial"',color:"#000",weight:400,italic:!1},headOptions:L(),footOptions:L()},{width:1,bodyOptions:{fontSize:16,align:z.RIGHT,lineSpace:0,wordGap:0,margin:0,fontFamily:'"Arial"',color:"#000",weight:400,italic:!1},headOptions:L(),footOptions:L()}]},visible:!0},{id:"6319ab91-5740-49c0-8265-1d05d97014a3",type:"grid",value:{widths:[1,1],data:[[{id:"7d4b8881-37d3-4b80-98e2-dbef273fd321",type:"spacer",value:{value:200},visible:!0},{id:"7d4b8881-37d3-4b80-98e2-dbef273fd320",type:"text",value:{text:`Item 1.
Item 2.
Item 3.
Item 4.`,options:{fontSize:"24",align:"left",lineSpace:"30",wordGap:0,margin:0,fontFamily:null,color:"#000",weight:400,italic:!1},imageOptions:{width:192,rotate:!1,flipX:!1,flipY:!1,invert:!1,grayscale:!1}},visible:!0}],[{id:"cafb2f8d-add1-4c34-9c1e-6f19c63732ac",type:"text",value:{text:`0,00
0,00
0,00
0,00`,options:{fontSize:"24",align:z.LEFT,lineSpace:"30",wordGap:0,margin:0,fontFamily:null,color:"#000",weight:400,italic:!1},imageOptions:{width:192,rotate:!1,flipX:!1,flipY:!1,invert:!1,grayscale:!1}},visible:!0}]],options:{columnGutter:0,rowGutter:0},imageOptions:{width:null,rotate:!1,flipX:!1,flipY:!1,invert:!1,grayscale:!1}},visible:!0},{type:"feedPitch",value:{value:15,type:"font"}}],qn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-menu"},[r("ul",[e._t("default")],2)])},Jn=[];const Qn={},at={};var Kn=W(Qn,qn,Jn,!1,eo,"6a61d96c",null,null);function eo(e){for(let t in at)this[t]=at[t]}var to=function(){return Kn.exports}(),ro=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",e._g({staticClass:"base-generic-button"},e.$listeners),[e._t("default",function(){return[e._v(e._s(e.text))]})],2)},no=[];const oo={props:{text:{type:String,default:"Button Text"}}},lt={};var io=W(oo,ro,no,!1,so,"0c7b8858",null,null);function so(e){for(let t in lt)this[t]=lt[t]}var ao=function(){return io.exports}(),lo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"app-menu-item",class:{selected:e.selected}},[r("base-generic-button",e._g(e._b({},"base-generic-button",e.$attrs,!1),e.$listeners),[e._t("default",function(){return[e._v(e._s(e.text))]})],2)],1)},co=[];const uo={components:{BaseGenericButton:ao},inheritAttrs:!1,props:{selected:{type:Boolean,default:!1},text:{type:String,default:null}}},ct={};var fo=W(uo,lo,co,!1,po,"1b42e491",null,null);function po(e){for(let t in ct)this[t]=ct[t]}var F=function(){return fo.exports}(),ho=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",e._g(e._b({staticClass:"app-menu-text"},"li",e.$attrs,!1),e.$listeners),[e._t("default",function(){return[r("span",{domProps:{innerHTML:e._s(e.text)}})]})],2)},vo=[];const mo={inheritAttrs:!1,props:{text:{type:String,default:null}}},ut={};var go=W(mo,ho,vo,!1,yo,"72abcabd",null,null);function yo(e){for(let t in ut)this[t]=ut[t]}var Ee=function(){return go.exports}(),_o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"app-menu-spacer"},[e._t("default")],2)},wo=[];const bo={},ft={};var xo=W(bo,_o,wo,!1,So,"d155e842",null,null);function So(e){for(let t in ft)this[t]=ft[t]}var je=function(){return xo.exports}(),Eo=function(){var e=this,t=e.$createElement;return e._self._c,e._m(0)},To=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"app-menu-divider"},[r("i")])}];const Io={},pt={};var Co=W(Io,Eo,To,!1,Oo,"53fd4f5e",null,null);function Oo(e){for(let t in pt)this[t]=pt[t]}var K=function(){return Co.exports}(),ko=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app",class:{ready:e.ready},style:e.style},[r("app-menu",{staticClass:"header"},e._l(e.headerItems,function(n,o){return r(n.component,e._g(e._b({key:o,tag:"component"},"component",n.props,!1),n.on))}),1),r("div",{staticClass:"app-content"},[!e.$client.connected&&e.ready?r("view-start",{on:{apply:e.onApplyViewStart}}):e.currentView===e.VIEWS.PRINTER?r("view-printer",{attrs:{colors:e.colors},model:{value:e.printerTemplate,callback:function(n){e.printerTemplate=n},expression:"printerTemplate"}}):e.currentView===e.VIEWS.INFO?r("view-info"):e._e()],1),r("app-menu",{staticClass:"footer"},e._l(e.footerItems,function(n,o){return r(n.component,e._g(e._b({key:o,tag:"component"},"component",n.props,!1),n.on))}),1),e._l(e.$errorList.errors,function(n,o){return r("dialog-error",e._b({key:o,attrs:{"init-open":""}},"dialog-error",n,!1))}),e._l(e.$dialog.prompts,function(n,o){return r("dialog-prompt",e._b({key:o,attrs:{"init-open":""}},"dialog-prompt",n,!1))}),e.ready?r("dialog-remote",{ref:"dialogRemote"}):e._e(),e.ready?r("dialog-server",{ref:"dialogServer"}):e._e(),e.ready?r("dialog-options",{ref:"dialogOptions"}):e._e(),e._m(0)],2)},$o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"display-look"},[r("div",{staticClass:"scanlines"})])}];const Z={NONE:null,INFO:"info",START:"start",PRINTER:"priner"},Ao={amber:{primary:[255,204,0],secondary:[0,0,0],printer:{preview:{background:[255,204,0],foreground:[0,0,0]}}},green:{primary:[51,255,0],secondary:[0,0,0],printer:{preview:{background:[51,255,0],foreground:[0,0,0]}}},whiteBlack:{primary:[255,255,255],secondary:[0,0,0],printer:{preview:{background:[255,255,255],foreground:[0,0,0]}}},blackWhite:{primary:[0,0,0],secondary:[255,255,255],printer:{preview:{background:[0,0,0],foreground:[255,255,255]}}}};function Po(){return Yn.map(e=>new ke(e))}const Lo={components:{ViewPrinter:()=>O(()=>import("./Printer.bca2035e.js").then(function(e){return e.P}),["assets/Printer.bca2035e.js","assets/Printer.71e2f60f.css","assets/View.94178c5a.js","assets/TextButton.82eb343c.js","assets/TextButton.55961f21.css","assets/DropDown.579d2678.js","assets/DropDown.a92b0b2c.css","assets/Dialog.ab3df24a.js","assets/Dialog.d0fd1d1e.css"]),ViewStart:()=>O(()=>import("./Start.a478d1bc.js"),["assets/Start.a478d1bc.js","assets/Start.d83307a1.css","assets/View.94178c5a.js","assets/TextButton.82eb343c.js","assets/TextButton.55961f21.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),ViewInfo:()=>O(()=>import("./Info.167308ce.js"),["assets/Info.167308ce.js","assets/Info.992aea81.css","assets/View.94178c5a.js","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),AppMenu:to,AppMenuItem:F,AppMenuText:Ee,AppMenuSpacer:je,AppMenuDivider:K,DialogError:()=>O(()=>import("./Error.316b651a.js"),["assets/Error.316b651a.js","assets/Error.9832724b.css","assets/Dialog.ab3df24a.js","assets/Dialog.d0fd1d1e.css","assets/TextButton.82eb343c.js","assets/TextButton.55961f21.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),DialogRemote:()=>O(()=>import("./Remote.24ff9c00.js"),["assets/Remote.24ff9c00.js","assets/Remote.faa484f5.css","assets/Dialog.ab3df24a.js","assets/Dialog.d0fd1d1e.css","assets/TextButton.82eb343c.js","assets/TextButton.55961f21.css","assets/DropDown.579d2678.js","assets/DropDown.a92b0b2c.css","assets/CheckBox.53536608.js","assets/CheckBox.dd90d0a7.css","assets/TextField.42ffd580.js","assets/TextField.d3378861.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),DialogServer:()=>O(()=>import("./Server.89cbe185.js"),["assets/Server.89cbe185.js","assets/Server.4f2589f0.css","assets/Dialog.ab3df24a.js","assets/Dialog.d0fd1d1e.css","assets/TextButton.82eb343c.js","assets/TextButton.55961f21.css","assets/DropDown.579d2678.js","assets/DropDown.a92b0b2c.css","assets/Content.1c371186.js","assets/Content.182197b6.css","assets/TextField.42ffd580.js","assets/TextField.d3378861.css","assets/FileSelect.3ccdacfa.js","assets/FileSelect.8c5eefc3.css","assets/CheckBox.53536608.js","assets/CheckBox.dd90d0a7.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),DialogOptions:()=>O(()=>import("./Options.a236ae48.js"),["assets/Options.a236ae48.js","assets/Options.5466c3cb.css","assets/Dialog.ab3df24a.js","assets/Dialog.d0fd1d1e.css","assets/TextButton.82eb343c.js","assets/TextButton.55961f21.css","assets/TextField.42ffd580.js","assets/TextField.d3378861.css","assets/DropDown.579d2678.js","assets/DropDown.a92b0b2c.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"]),DialogPrompt:()=>O(()=>import("./Prompt.d3a494a7.js"),["assets/Prompt.d3a494a7.js","assets/Prompt.ba8cf0c2.css","assets/Dialog.ab3df24a.js","assets/Dialog.d0fd1d1e.css","assets/TextButton.82eb343c.js","assets/TextButton.55961f21.css","assets/vendor.b1428349.js","assets/devterm.9e5b33a4.js","assets/buffer.4460b8ba.js"])},data(){return{VIEWS:Z,currentView:Z.PRINTER,ready:!1,fullscreen:!1,printerTemplate:Po()}},computed:{headerItems(){const e=[{component:F,on:{click:this.onClickNew},props:{text:"New"}},{component:K},{component:F,on:{click:this.onClickSave},props:{text:"Save"}},{component:F,title:"Load",on:{click:this.onClickLoad},props:{text:"Load"}},{component:K}];return[...this.$client.connected&&[{component:F,on:{click:()=>this.currentView=Z.INFO},props:{selected:this.currentView===Z.INFO,text:"Info"}},{component:F,on:{click:()=>this.currentView=Z.PRINTER},props:{selected:this.currentView===Z.PRINTER,text:"Printer"}}]||[],{component:je},...this.$client.connected&&this.currentView===Z.PRINTER&&e||[],{component:F,on:{click:this.onClickOptions},props:{text:"Options"}},R()&&[{component:K},{component:F,on:{click:this.onClickClose},props:{text:"Close"}}]].flat().filter(Boolean)},footerItems(){return[R()&&[{component:F,on:{click:this.onClickMinimizeWindow},props:{text:"Minimize"}},{component:F,on:{click:this.onClickMaximizeWindow},props:{text:"Maximize"}}].flat(),{component:F,on:{click:this.onClickFullscreen},props:{selected:this.fullscreen,text:"Fullscreen"}},{component:je},this.hasServer&&[{component:Ee,on:{click:this.showServerDialog},props:{class:{connection:!0,connected:this.$server.options.active},text:`${this.$server.options.active?`Server (*:${this.$server.options.port}${this.$server.options.secure?"/SSL":""})`:"Server Offline"}`}},{component:K}],{component:Ee,on:{click:this.showRemoteDialog},props:{class:{connection:!0,connected:this.clientConnected},text:`${this.clientConnected?`Online (${this.$client.host}:${this.$client.port}${this.$client.secure?"/SSL":""})`:"Offline"}`}},{component:K},{component:Ee,on:{click:()=>{window.open("https://github.com/ThornWalli/devterm-toolbox/releases")}},props:{class:"info-version",text:this.version}}].flat().filter(Boolean)},hasServer(){return!this.$server.disabled},version(){return this.$config.version},colors(){return Ao[this.$config.data.theme]},clientConnected(){return this.$client.connected},style(){return g(g({"--zoom":`${this.$config.data.zoom}`,"--color-primary":`rgb(${this.colors.primary.join(",")})`,"--color-secondary":`rgb(${this.colors.secondary.join(",")})`},Object.fromEntries(Array(10).fill("").map((e,t)=>[`--color-primary-${(t+1)*10}`,`rgb(${this.colors.primary.join(" ")} / ${(t+1)*10}%)`]))),Object.fromEntries(Array(10).fill("").map((e,t)=>[`--color-secondary-${(t+1)*10}`,`rgb(${this.colors.secondary.join(" ")} / ${(t+1)*10}%)`])))}},async mounted(){await _n(),await this.$config.init(),await this.$server.init(),this.hasServer&&await this.$server.refresh(),await this.$config.load();const e=this.$config.get("profiles").find(({name:t})=>t===this.$config.get("profile"));if(e){const{port:t,host:r,ssl:n,secure:o}=e;if(this.$config.get("startType")&&t)try{this.$server&&this.$config.get("startType")==="local"&&!this.$server.options.active&&await this.$server.start(t,n),r&&await this.$client.connect(t,r,o)}catch{}}this.ready=!0,this.registerListeners()},methods:{registerListeners(){cn(e=>{this.fullscreen=e}),ln((e,t)=>{switch(e){case"open":switch(t){case"options":this.showOptionsDialog();break;case"remote":this.showRemoteDialog();break;case"server":this.showServerDialog();break}break}})},onClickMinimizeWindow(){return tn()},onClickMaximizeWindow(){return rn()},onClickFullscreen(){return nn(!this.fullscreen)},onClickClose(){return on()},onClickNew(){this.printerTemplate=[]},onClickSave(){return sn(this.printerTemplate)},async onClickLoad(){try{const e=await an();e&&(this.printerTemplate=e)}catch(e){this.$errorList.add(e)}},onClickOptions(){this.showOptionsDialog()},async onApplyViewStart({type:e}){this.$config.set("startType",e);let t={};switch(e){case"local":t=await this.showServerDialog();break;case"remote":t=await this.showRemoteDialog();break}const{profile:r}=t||{};r&&(this.$config.set("profile",r),await this.$config.save())},showServerDialog(){return this.$refs.dialogServer.show()},showRemoteDialog(){return this.$refs.dialogRemote.show()},showOptionsDialog(){return this.$refs.dialogOptions.show()}}},dt={};var Ro=W(Lo,ko,$o,!1,Do,"168a6c88",null,null);function Do(e){for(let t in dt)this[t]=dt[t]}var Gt=function(){return Ro.exports}();class Fo{constructor(){this.errors=[]}add(t,r){typeof t=="object"&&(console.error(t),t.message?(t.type&&(r=t.type),t=t.message):t=JSON.stringify(t));const n={title:r,message:t},o=()=>{this.errors.slice(this.errors.indexOf(n),1)};n.callback=o,this.errors.push(n)}}const Ht=N.observable(new Fo);Object.defineProperty(N.prototype,"$errorList",{get(){return Ht}});const hi=512,Te=()=>({theme:"amber",zoom:1,startType:null,ssl:{key:null,cert:null,pfx:null,passphrase:null},profiles:[]}),No=()=>({name:null,port:3e3,host:null,secure:!1,ssl:{key:null,cert:null,pfx:null,passphrase:null}}),vi="localhost",Mo="Profile Default";class jo{constructor(){this.data=Te(),this.version=null,this.fonts=[]}async init(){this.version=await pn(),this.fonts=await dn()}toJSON(){return Object.assign({},this.data,{version:this.version})}get(t){return this.data[t]}set(t,r){typeof t=="string"?this.data[t]=r:typeof t=="object"&&Object.entries(t).forEach(([n,o])=>this.set(n,o))}save(){return fn(this.toJSON())}reset(){return this.data=Te(),this.save()}async load(){let t;try{t=await un()}catch{t=Te()}return console.log(t),this.data=Object.assign(Te(),t)}saveProfile(t){t.name=t.name||Mo;const r=this.get("profiles");let n=this.get("profiles").find(({name:o})=>o===t.name);return n?(console.log("update profile",n.name,n),r[r.indexOf(n)]=g(g({},n),t)):(console.log("create profile",t.name,t),n=g(g({},No()),t),r.push(n)),this.set("profiles",r),this.save()}deleteProfile(t){const r=this.get("profiles"),n=this.get("profiles").find(({name:o})=>o===t);return r.slice(r.indexOf(n),1),this.set("profiles",r),this.save()}}const Go=N.observable(new jo);Object.defineProperty(N.prototype,"$config",{get(){return Go}});Object.defineProperty(N.prototype,"$server",{get(){return{init(){return Promise.resolve()},disabled:!0}}});var ze=9224,ht=29,Ho=function(e){const t=gt.Buffer.alloc(e.byteLength),r=new Uint8Array(e);for(let n=0;n<t.length;++n)t[n]=r[n];return t},Vt=(e,t)=>{const r=e/8%256,n=e/8/256,o=t%256,i=t/256,s=(r+256*n)*(o+256*i);return{xL:r,xH:n,yL:o,yH:i,k:s}},Vo=(e,t)=>{const{k:r}=Vt(e,1),n=ze/r;return Math.ceil(t/n)},zo=e=>{const t=e.getContext("2d"),r=Vo(e.width,e.height),n=[];for(let o=0;o<r;o++)n.push(t.getImageData(0,e.height/r*o,e.width,e.height/r));return n};function Bo(e){const t=(n,o)=>{const i=(o*e.width+n)*4,s=e.data;return{r:s[i],g:s[i+1],b:s[i+2],a:s[i+3]}},r=[];for(let n=0;n<e.height;n++){r[n]=r[n]||[];for(let o=0;o<e.width;o++)r[n][o]=t(o,n)}return r}var Wo=e=>{const t=[],{width:r,height:n}=e,o=Bo(e);for(let i=0;i<n;i++){t[i]=new Uint8Array(Math.round(r/8));for(let s=0;s<t[i].length;s++){t[i][s]=0;for(let a=0;a<8;a++){const{r:l,g:c,b:p,a:w}=o[i][s*8+a]||{r:255,g:255,b:255,a:255};((l+c+p)/3/255<.6||w<.6)&&(t[i][s]|=1<<7-a)}}}return t},Xo=(e,t)=>{const{xL:r,xH:n,yL:o,yH:i,k:s}=Vt(e,t),a=[ht,118,48,0,r,n,o,i];if(a[0]===ht&&a[1]===118&&a[2]===48&&!(s<=ze))throw new Error(`Image too large; ${s} > ${ze}`);return a},Uo=async e=>(await zo(e)).map(n=>{const o=Wo(n);return[gt.Buffer.from(Xo(o[0].length*8,n.height))].concat(o.map(i=>Ho(i)))}).flat();function vt(e,t,r){const n={font:"18px Arial, sans-serif",sizeToFill:!1,maxFontSizeToFill:!1,lineHeight:1,allowNewLine:!0,lineBreak:"auto",textAlign:"left",verticalAlign:"top",justifyLines:!1,paddingX:0,paddingY:0,fitParent:!1,strokeText:!1,renderHDPI:!0,textDecoration:"none"},o={};for(const m in n)o[m]=r.hasOwnProperty(m)?r[m]:n[m];const i=e.getContext("2d");i.font=o.font,i.textBaseline="bottom";let s=1;const a=typeof window!="undefined"?window.devicePixelRatio:this.devicePixelRatio;if(o.renderHDPI&&a>1){const m={};for(const b in i)m[b]=i[b];const _=e.width,E=e.height;s=a,e.width=_*s,e.height=E*s,e.style.width=_*s*.5+"px",e.style.height=E*s*.5+"px";for(const b in m)try{i[b]=m[b]}catch{}i.scale(s,s)}const l=(o.fitParent?e.parentNode.clientWidth:e.width)/s,c=(o.fitParent?e.parentNode.clientHeight:e.height)/s,p=l-o.paddingX*2,w=c-o.paddingY*2,f=o.font.match(/\d+(px|em|%)/g)?+o.font.match(/\d+(px|em|%)/g)[0].match(/\d+/g):18;let y=0,u=[];const d=[],v={x:0,y:0};let h=0,S;const x="\u200B";t=T(t),I(f),k(),qt(),D();function T(m){do m=m.replace(/\n\n/g,`
`+x+`
`);while(m.includes(`

`));return m}function I(m){S||(S=o.sizeToFill?i.font.split(/\b\d+px\b/i):o.font.split(/\b\d+px\b/i)),i.font=S[0]+m+"px"+S[1]}function k(){isNaN(o.lineHeight)?o.lineHeight.toString().includes("px")?h=parseInt(o.lineHeight):o.lineHeight.toString().includes("%")&&(h=parseInt(o.lineHeight)/100*f):h=f*o.lineHeight}function D(){if(o.sizeToFill){const m=t.trim().split(/\s+/).length;let _=0;const E=o.maxFontSizeToFill!==!1;do if(E)if(++_<=o.maxFontSizeToFill)H(_);else break;else H(++_);while(y<w&&u.join(" ").split(/\s+/).length===m);H(--_)}else le();o.justifyLines&&o.lineBreak==="auto"&&Wt(),Yt(),Zt(),Ut()}function H(m){I(m),h=m,le()}function le(){if(o.allowNewLine){const _=t.trim().split(`
`);for(let E=0,b=0;E<_.length-1;E++)b+=_[E].trim().split(/\s+/).length,d.push(b)}const m=t.trim().split(/\s+/);ve(m),Bt(m),y=u.length*h}function ve(m){let _,E,b,X;m.forEach(function(M,me){if(_="",E=i.measureText(M).width,E>p){for(var j=0;i.measureText(_+M[j]).width<=p&&j<M.length;j++)_+=M[j];b=M.slice(0,j),X=M.slice(j),m.splice(me,1,b,X)}})}function Bt(m){u=[];for(let _=0,E=0;_<m.length;E++)if(u[E]="",o.lineBreak==="auto"){if(i.measureText(u[E]+m[_]).width>p)break;for(;i.measureText(u[E]+m[_]).width<=p&&_<m.length;)if(u[E]+=m[_]+" ",_++,o.allowNewLine){for(let b=0;b<d.length;b++)if(d[b]===_){E++,u[E]="";break}}u[E]=u[E].trim()}else u[E]=m[_],_++}function Wt(){let m,_,E;for(var b=0;b<u.length;b++)E=i.measureText(u[b]).width,(!m||E>m)&&(m=E,_=b);let X,M,me,j,Le;const ge="\u200A";for(b=0;b<u.length;b++)if(b!==_&&(X=u[b].trim().split(/\s+/).length,!(X<=1))){u[b]=u[b].trim().split(/\s+/).join(ge),M=i.measureText(ge).width,me=(m-i.measureText(u[b]).width)/M,j=me/(X-1),Le="";for(let qe=0;qe<j;qe++)Le+=ge;u[b]=u[b].trim().split(ge).join(Le)}}function Xt(m,_,E){const b=i.measureText(m).width;switch(i.textAlign){case"center":_-=b/2;break;case"right":_-=b;break}i.beginPath(),i.moveTo(_,E),i.lineTo(_+b,E),i.stroke()}function Ut(){const m=x+" ";for(let _=0;_<u.length;_++)v.y=parseInt(v.y)+h,u[_]!==m&&(i.fillText(u[_],v.x,v.y),o.strokeText&&i.strokeText(u[_],v.x,v.y),o.textDecoration.toLocaleLowerCase()==="underline"&&Xt(u[_],v.x,v.y))}function Zt(){i.textAlign=o.textAlign,o.textAlign==="center"?v.x=l/2:o.textAlign==="right"?v.x=l-o.paddingX:v.x=o.paddingX}function Yt(){o.verticalAlign==="middle"?v.y=(c-y)/2:o.verticalAlign==="bottom"?v.y=c-y-o.paddingY:v.y=o.paddingY}function qt(){if(typeof t!="string")throw new TypeError("The second parameter must be a String.");if(isNaN(f))throw new TypeError('Cannot parse "font".');if(isNaN(h))throw new TypeError('Cannot parse "lineHeight".');if(o.textAlign.toLocaleLowerCase()!=="left"&&o.textAlign.toLocaleLowerCase()!=="center"&&o.textAlign.toLocaleLowerCase()!=="right")throw new TypeError('Property "textAlign" must be set to either "left", "center", or "right".');if(o.verticalAlign.toLocaleLowerCase()!=="top"&&o.verticalAlign.toLocaleLowerCase()!=="middle"&&o.verticalAlign.toLocaleLowerCase()!=="bottom")throw new TypeError('Property "verticalAlign" must be set to either "top", "middle", or "bottom".');if(typeof o.justifyLines!="boolean")throw new TypeError('Property "justifyLines" must be a Boolean.');if(isNaN(o.paddingX))throw new TypeError('Property "paddingX" must be a Number.');if(isNaN(o.paddingY))throw new TypeError('Property "paddingY" must be a Number.');if(typeof o.fitParent!="boolean")throw new TypeError('Property "fitParent" must be a Boolean.');if(o.lineBreak.toLocaleLowerCase()!=="auto"&&o.lineBreak.toLocaleLowerCase()!=="word")throw new TypeError('Property "lineBreak" must be set to either "auto" or "word".');if(typeof o.sizeToFill!="boolean")throw new TypeError('Property "sizeToFill" must be a Boolean.');if(typeof o.strokeText!="boolean")throw new TypeError('Property "strokeText" must be a Boolean.');if(typeof o.renderHDPI!="boolean")throw new TypeError('Property "renderHDPI" must be a Boolean.');if(o.textDecoration.toLocaleLowerCase()!=="none"&&o.textDecoration.toLocaleLowerCase()!=="underline")throw new TypeError('Property "textDecoration" must be set to either "none" or "underline".')}return u}const mi=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toDataURL("image/png",100)},Zo=(e,t,r)=>{if(t){if(e.width<=t)return e;r=t*(e.height/e.width)}else{if(e.height<=r)return e;t=r*(e.width/e.height)}const n=new OffscreenCanvas(t,r);return n.getContext("2d").drawImage(e,0,0,t,r),n},Yo=async e=>{const t=new window.Image;await new Promise((o,i)=>{t.onload=()=>o(t),t.onerror=()=>i(new Error("image not found")),t.src=e,t.crossOrigin="anonymous"});const r=new OffscreenCanvas(t.naturalWidth,t.naturalHeight);return r.getContext("2d").drawImage(t,0,0),r},gi=(e,t,r=1,n=!0)=>{e=Zo(e,q);const o=e.getContext("2d"),i=o.getImageData(0,0,o.canvas.width,o.canvas.height);return n&&qo(i.data,[t.foreground,t.background],r),o.putImageData(i,0,0),e},qo=(e,t,r)=>{for(let n=0;n<e.length;n+=4)(e[n]+e[n+1]+e[n+2])/3/255<.6?(e[n]=t[0][0],e[n+1]=t[0][1],e[n+2]=t[0][2],e[n+3]=parseInt(e[n+3]*r)):(e[n]=t[1][0],e[n+1]=t[1][1],e[n+2]=t[1][2],e[n+3]=parseInt(e[n+3]*r))},Y=e=>Uo(e),mt=(e,t,r,n)=>{n=g({background:[255,255,255],foreground:[0,0,0]},n);const{fontSize:o,align:i,lineSpace:s,wordGap:a,margin:l,fontFamily:c,weight:p,italic:w,underline:f,justify:y}=g(g({},L()),t);e=String(e);const u=document.createElement("canvas");u.width=r,u.style.display="none",document.body.append(u);const d=u.getContext("2d");d.canvas.style.letterSpacing=`${a}px`;const v=1+s/o,h={font:`${w?"italic ":""}${p} ${o}px ${c}`,lineHeight:v,textAlign:i,verticalAlign:"top",paddingX:l,paddingY:0,fitParent:!1,lineBreak:"auto",strokeText:!1,sizeToFill:!1,maxFontSizeToFill:!0,allowNewLine:!0,justifyLines:y,renderHDPI:!1,textDecoration:f?"underline":"none"},S=vt(u,e,h);return u.imageSmoothingEnabled=!1,u.height=S.length*o*v,d.fillStyle=`rgb(${n.background.join(" ")})`,d.fillRect(0,0,u.width,u.height),d.fillStyle=`rgb(${n.foreground.join(" ")})`,vt(u,e,h),u.remove(),u},yi=(e,t,r,n)=>{n=g({background:[255,255,255],foreground:[0,0,0]},n);const{fontSize:o,align:i,lineSpace:s,wordGap:a,margin:l,fontFamily:c,weight:p,italic:w}=g({fontSize:12,align:G.LEFT,wordGap:0,lineSpace:0,margin:0,fontFamily:"sans-serif",color:"#000",weight:400,italic:!1},t),f=[0,r*l,0,0];let y=0,u=r;switch(i){case G.RIGHT:y+=r,u-=f[1];break;case G.CENTER:y+=u/2;break;default:y+=f[1],u-=f[1];break}const d=`${w?"italic ":""}${p} ${o}px ${c}`,v=document.createElement("canvas");v.style.display="none",document.body.append(v);const h=v.getContext("2d");h.canvas.style.letterSpacing=`${a}px`,h.font=d;const S=Math.max(s,o)/o,x=e.split(`
`).map(I=>zt(h,I,0,0,o,u)).flat(),T=x.length*o*S+f[0]+f[2];if(!r)switch(r=parseInt(e.split(`
`).reduce((I,k)=>Math.max(h.measureText(k).width,I),0)),y=0,i){case G.RIGHT:y+=r;break;case G.CENTER:y+=r/2;break}return v.width=r,h.font=d,v.height=T,h.fillStyle=`rgb(${n.background.join(" ")})`,h.fillRect(0,0,v.width,v.height),h.fillStyle=`rgb(${n.foreground.join(" ")})`,h.textBaseline="top",h.font=d,h.canvas.style.letterSpacing=`${a}px`,h.textAlign={[z.LEFT]:"left",[z.CENTER]:"center",[z.RIGHT]:"right"}[Number(i)],h.translate(0,f[0]),x.forEach((I,k)=>{h.fillText(I,y,k*S*o-(o-S*o)/2)}),v.remove(),v};function zt(e,t,r,n,o,i,s=[]){if(i=i||0,i<=0)return[t];for(let a=1;a<=t.length;a++){const l=t.substr(0,a);if(e.measureText(l).width>i)return s.push(t.substr(0,a-1)),s=s.concat(zt(e,t.substr(a-1),r,n+o,o,i)),s}return s.push(t),s}var ce={cutLine:{display:()=>({title:"Cut Line"})},grid:{display:e=>({title:"Grid",value:`Columns: ${e.data.length}`}),beforePrinterCommand:async(e,t=!0)=>{const{widths:r,data:n,options:o,imageOptions:i}=e.value,s=(i==null?void 0:i.width)||q,{columnGutter:a,rowGutter:l}=g({columnGutter:12,rowGutter:12},o);let c=r.filter(d=>d<1).reduce((d,v)=>d+(1-v),0);c/=r.filter(d=>d===1).length;const p=await Promise.all(n.map(async(d,v)=>{const h=n.length-1;return await Promise.all(d.filter(({visible:S})=>S).map(async S=>{let x=parseInt(s/n.length)*r[v];r[v]===1&&(x+=parseInt(s/n.length)*c),h>0&&(x=x-a*h/n.length);const{value:T}=S;(T.imageOptions=T.imageOptions||{}).width=x;try{return await ce[String(S.type)].beforePrinterCommand(g({},S),!1)}catch(I){return ce.text.beforePrinterCommand(new ke({visible:!0,value:Q(g({},Ve()),{text:I.message,imageOptions:T.imageOptions})}),!1)}}))})),w=p.reduce((d,v)=>{const h=v.length-1;return Math.max(v.filter(({visible:S})=>S).reduce((S,{value:x})=>S+x.height,h*l),d)},1);let f=new OffscreenCanvas(s,w);const y=f.getContext("2d");let u=0;return p.forEach((d,v)=>{let h=0;u+=d.filter(({visible:x})=>x).reduce((x,{value:T},I)=>(y.drawImage(T,u,h),h+=T.height+(I<d.length?l:0),Math.max(T.width,x)),0)+(v<p.length?a:0)}),f=U(f,i),e.value=t?await Y(f):f,e}},barcode:{display:e=>({title:"Barcode",value:`${e.text.slice(0,16)}\u2026`}),beforePrinterCommand:async(e,t=!0)=>{const{text:r,options:n,imageOptions:o}=e.value;let i=await Ln(r||"empty",n||{});return i=U(i,o),e.value=t?await Y(i):i,e}},qrCode:{display:e=>({title:"QR Code",value:`${e.text.slice(0,16)}\u2026`}),beforePrinterCommand:async(e,t=!0)=>{const{text:r,options:n,imageOptions:o}=e.value,i=g({},n);i.width=n.width||o.width;let s=await Rn(r||"empty",i);return s=U(s,o),e.value=t?await Y(s):s,e}},image:{display:()=>({title:"Image"}),beforePrinterCommand:async(e,t=!0)=>{const{file:r,imageOptions:n}=e.value;let o=await Yo(r);return o=U(o,n),e.value=t?await Y(o):o,e}},spacer:{display:()=>({title:"Spacer"}),beforePrinterCommand:async(e,t=!0)=>{const{value:r,imageOptions:n}=e.value;let o=new OffscreenCanvas((n==null?void 0:n.width)||q,Math.max(r,1));return o=U(o,n),e.value=t?await Y(o):o,e}},text:{display:e=>({title:"Text",value:`${e.text.slice(0,16)}\u2026`}),beforePrinterCommand:async(e,t=!0)=>{const{text:r,options:n,imageOptions:o}=e.value;let i=await mt(r||"empty",n||{},(o==null?void 0:o.rotate)?null:(o==null?void 0:o.width)||q);return i=U(i,o),e.value=t?await Y(i):i,e}},table:{display:e=>{var t;return{title:"Table",value:`Rows: ${e.data.length}; Columns: ${(t=e.data[0])==null?void 0:t.length}; `}},beforePrinterCommand:async(e,t=!0)=>{const{data:r,columns:n,options:o,imageOptions:i}=e.value,s=(i==null?void 0:i.width)||q,a=(i==null?void 0:i.width)||q;try{const{columnGutter:l,rowGutter:c}=g({columnGutter:12,rowGutter:12},o);let p=r;if(p.length<1)throw new Error("Table empty!");const w=n.length,f=a/w-(w-1)*l/w;let y=n.filter(({width:x})=>x<1).reduce((x,{width:T})=>x+(1-T),0);y/=n.filter(({width:x})=>x===1).length;const u=[];p=await Promise.all(p.map((x,T)=>Promise.all(Array(n.length).fill({}).map(async(I,k)=>{I=x[k];let D;o.useColumnStyles?(D=n[k].bodyOptions||{},o.headActive&&T<1?D=n[k].headOptions:o.footActive&&p.length-1===T&&(D=n[k].footOptions)):(D=o.bodyOptions||{},o.headActive&&T<1?D=o.headOptions:o.footActive&&p.length-1===T&&(D=o.footOptions));let H=parseInt(f*n[k].width);return n[k].width===1&&(H+=parseInt(s/n.length*y)),I=await mt(String(I===void 0?"":I),D,H),u[T]=Math.max(I.height,u[T]||0),I}))));const d=u.reduce((x,T)=>x+T,0)+(p.length-1)*c;let v=0,h=new OffscreenCanvas((i==null?void 0:i.width)||q,d);const S=h.getContext("2d");return n.forEach((x,T)=>{let I=0;v+=p.reduce((D,H,le)=>{const ve=H[T];return S.drawImage(ve,v,I),I+=u[le]+(le<p.length?c:0),Math.max(ve.width,D)},0)+(T<n.length?l:0)}),h=U(h,i),e.value=t?await Y(h):h,e}catch(l){return await ce.text.beforePrinterCommand(new ke({visible:!0,value:Q(g({},Q(g({},Ve()),{options:Q(g({},L),{align:G.CENTER,weight:700,underline:!0})})),{text:l.message})}),t)}}},nativeText:{display:e=>({title:"Native Text",value:`${e.slice(0,16)}\u2026`})},feedPitch:{display:({type:e,value:t})=>({title:"Feed-Pitch",value:`${e} | ${t}`})},reset:{display:e=>({property:!0,title:"Reset"})},setAlign:{display:e=>({property:!0,title:"Align",value:`${Object.entries(G).find(t=>t[1]===e)[0]}`})},setFont:{display:e=>({property:!0,title:"Font",value:Object.entries($).find(t=>Number(e)===t[1])[0]})},setLineSpace:{display:e=>({property:!0,title:"Line-Space",value:e})},setWordGap:{display:e=>({property:!0,title:"Word-Gap",value:e})},setMargin:{display:e=>({property:!0,title:"Margin",value:e})},setDensity:{display:e=>({property:!0,title:"Density",value:e})}};class Jo extends sr{constructor(){super();this.socket=null,this.connected=!1}async connect(t=3e3,r="localhost",n=!1){const o=n?"wss":"ws";this.io=await this.ready();const i=this.io(`${o}://${r}:${t}`,{autoConnect:!1,reconnection:!1,secure:n,transports:["websocket"]});this.socket=await new Promise((s,a)=>{i.on("error",l=>{this.emit("error",l)}),i.on("connect_error",l=>{this.emit("error",l),a(l)}),i.on("connect",()=>{this.connected=i.connected,this.emit("connect"),s(i)}),i.on("disconnect",()=>{this.disconnect(),this.emit("disconnect")}),i.connect()})}async ready(){if(this.io)return this.io;const{io:t}=await O(()=>import("./index.c05fa7e4.js"),[]);return this.io=t,t}get host(){var t,r,n;return(n=(r=(t=this.socket)==null?void 0:t.io)==null?void 0:r.opts)==null?void 0:n.hostname}get port(){var t,r,n,o,i,s;return((n=(r=(t=this.socket)==null?void 0:t.io)==null?void 0:r.opts)==null?void 0:n.port)&&Number((s=(i=(o=this.socket)==null?void 0:o.io)==null?void 0:i.opts)==null?void 0:s.port)||void 0}get secure(){var t,r,n;return(n=(r=(t=this.socket)==null?void 0:t.io)==null?void 0:r.opts)==null?void 0:n.secure}promiseEmit(t,r){return new Promise(n=>{this.socket.emit(t,r,n)})}disconnect(){var t;(t=this.socket)==null||t.destroy(),this.socket=null,this.connected=!1}async getInfo(){const t=await this.promiseEmit("getInfo");return console.log("getInfo",t),t}async executeActions(t){t=await Promise.all(t.filter(({visible:n})=>n).map(async n=>"beforePrinterCommand"in ce[n.type]?await ce[n.type].beforePrinterCommand(Object.assign({},n)):n));const r=await this.promiseEmit("executeActions",t);console.log("executeActions",r)}}const Ye=N.observable(new Jo);en(Ye);Ye.on("error",e=>{Ht.add(e)});Object.defineProperty(N.prototype,"$client",{get(){return Ye}});class Qo{constructor(){this.prompts=[]}prompt(t,r){return new Promise(n=>{const o={title:r,message:t},i=s=>{this.prompts.slice(this.prompts.indexOf(o),1),n(s)};o.callback=i,this.prompts.push(o)})}}const Ko=N.observable(new Qo);Object.defineProperty(N.prototype,"$dialog",{get(){return Ko}});N.component("App",Gt);new N({render:e=>e(Gt)}).$mount("#app");export{ce as A,ao as B,z as C,Mo as D,L as E,ai as F,Zn as G,Se as H,Bn as I,Yo as J,Zo as K,mi as L,ii as M,U as N,hi as O,$ as P,O as _,fi as a,ke as b,pi as c,ui as d,di as e,pe as f,Gn as g,fe as h,$e as i,No as j,oi as k,vi as l,Te as m,W as n,ie as o,G as p,yi as q,gi as r,Kr as s,Un as t,zn as u,Xn as v,Wn as w,Ve as x,si as y,ae as z};
