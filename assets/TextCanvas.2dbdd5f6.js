var u=Object.defineProperty,l=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var a=(t,e,r)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,s=(t,e)=>{for(var r in e||(e={}))v.call(e,r)&&a(t,r,e[r]);if(o)for(var r of o(e))f.call(e,r)&&a(t,r,e[r]);return t},d=(t,e)=>l(t,m(e));import{n as g,A as i,q as w,u as _,p as b,b as x,v as j}from"./index.a899c593.js";import{b as T}from"./Printer.463e761d.js";import"./vendor.b1428349.js";import"./devterm.9c60640a.js";import"./buffer.89012e65.js";import"./View.4b816419.js";import"./TextButton.56486c90.js";import"./TextField.158bc4a1.js";import"./Dialog.e32fd53d.js";import"./FileSelect.18143136.js";import"./CheckBox.843cbd88.js";var C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("canvas")},F=[];const y={props:{colors:{type:Object,default(){return{printer:{preview:{foreground:[255,0,0]}}}}},value:{type:Object,default(){return T()}},width:{type:Number,default:384},options:{type:Object,default(){return{}}}},data(){return{ctx:null}},computed:{align(){return{[i.LEFT]:"left",[i.CENTER]:"center",[i.RIGHT]:"right"}[this.options.align]},font(){return w[Number(this.options.font)]}},watch:{value(){this.render()}},mounted(){this.$el.width=this.width,this.ctx=this.$el.getContext("2d"),this.render()},methods:{getColor(t=1){return`rgb(${this.colors.printer.preview.foreground.join(" ")} / ${t*100}%)`},render(){window.cancelAnimationFrame(this.animationFrame),this.animationFrame=window.requestAnimationFrame(()=>{const t=this.ctx,e=_(this.value.text,d(s({},this.value.options),{margin:this.options.margin}),this.width,{background:this.colors.printer.preview.background,foreground:this.colors.printer.preview.foreground});let r=b(e,s({},this.value.imageOptions));r=x(r,{background:this.colors.printer.preview.background,foreground:this.colors.printer.preview.foreground},.6+.4*(this.options.density/j),!1),t.canvas.width=this.width,t.canvas.height=r.height;const p=this.width,h=parseInt(this.options.margin*p);let n=0;switch(this.options.align){case i.RIGHT:n+=this.width-r.width;break;case i.CENTER:n+=(this.width-r.width)/2;break;default:n+=h;break}t.drawImage(r,n,0),this.$emit("ready")})}}},c={};var k=g(y,C,F,!1,E,"6bbbcf10",null,null);function E(t){for(let e in c)this[e]=c[e]}var B=function(){return k.exports}();export{B as default};
