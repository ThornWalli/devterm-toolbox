import{d as o,n as c,p as d,m as l,b as i}from"./index.147b260a.js";import{g as p}from"./Printer.3a569ba2.js";import u from"./NativeText.ea11a6e3.js";import"./vendor.b1428349.js";import"./devterm.956d6268.js";import"./buffer.89012e65.js";import"./View.b8bc9a50.js";import"./TextButton.9479af49.js";import"./DropDown.295423ad.js";import"./Dialog.d97b64e0.js";var h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.error?r("preview-native-text",{attrs:{value:t.error.message,colors:t.colors,options:t.options}}):r("canvas",{ref:"canvas"})],1)},v=[];const m={components:{PreviewNativeText:u},props:{colors:{type:Object,default(){return{base:[255,0,0]}}},value:{type:Object,default(){return p()}},width:{type:Number,default:384},options:{type:Object,default(){return{}}}},data(){return{error:null,ctx:null}},watch:{async value(){await this.render()}},async mounted(){await this.render()},methods:{render(){this.error=null,this.$nextTick(()=>{const t=this.$refs.canvas.getContext("2d");window.requestAnimationFrame(async()=>{try{let e=await f(this.value);e=d(e,{background:this.colors.printer.preview.background,foreground:this.colors.printer.preview.foreground},.6+.4*(this.options.density/l)),t.canvas.width=this.width,t.canvas.height=e.height,t.fillStyle=`rgb(${this.colors.printer.preview.background.join(" ")})`,t.fillRect(0,0,t.canvas.width,t.canvas.height);const r=this.width,n=parseInt(this.options.margin*r);let a=0;switch(this.options.align){case i.RIGHT:a+=this.width-e.width;break;case i.CENTER:a+=(this.width-e.width)/2;break;default:a+=n;break}t.drawImage(e,a,0)}catch(e){throw this.error=e,e}this.$emit("ready")})})}}},f=async t=>(await o.grid.beforePrinterCommand({value:t},!1)).value,s={};var w=c(m,h,v,!1,_,"06152d46",null,null);function _(t){for(let e in s)this[e]=s[e]}var D=function(){return w.exports}();export{D as default,f as render};
