import{i as h,p as l,A as i}from"./devterm.94c2d908.js";import{n as m,p as u}from"./index.d17ffcf7.js";import d from"./TextCanvas.e306df38.js";import"./vendor.b1428349.js";var v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.error?a("preview-text-canvas",{attrs:{value:e.error.message,colors:e.colors,options:e.options}}):a("canvas",{ref:"canvas"})],1)},g=[];const p={components:{PreviewTextCanvas:d},props:{colors:{type:Object,default(){return{base:[255,0,0]}}},value:{type:Object,default(){return{file:null}}},width:{type:Number,default:384},options:{type:Object,default(){return{}}}},data(){return{error:null,ctx:null,img:null}},watch:{async value(){this.value.file&&await this.changeImage(this.value.file),this.render()}},async mounted(){this.value.file&&await this.changeImage(this.value.file),this.render()},methods:{changeImage(e){return new Promise(t=>{this.img=document.createElement("img"),this.img.onload=()=>{this.$el.height=this.img.naturalHeight,t()},this.img.src=e})},render(){this.error=null,this.$nextTick(()=>{const e=this.$refs.canvas.getContext("2d");window.requestAnimationFrame(()=>{try{const t=h(this.img.naturalWidth,this.img.naturalHeight);t.getContext("2d").drawImage(this.img,0,0);const r=l(t,this.value.imageOptions);e.canvas.width=this.width,e.canvas.height=r.height;const o=this.width,c=parseInt(this.options.margin*o);let s=0;switch(this.options.align){case i.RIGHT:s+=this.width-r.width;break;case i.CENTER:s+=(this.width-r.width)/2;break;default:s+=c;break}e.drawImage(r,s,0),u(e.canvas,this.colors)}catch(t){this.error=t}})})}}},n={};var f=m(p,v,g,!1,_,"33942758",null,null);function _(e){for(let t in n)this[t]=n[t]}var I=function(){return f.exports}();export{I as default};
